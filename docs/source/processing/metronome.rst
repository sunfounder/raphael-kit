.. note::

    ã“ã‚“ã«ã¡ã¯ã€SunFounderã®Raspberry Pi & Arduino & ESP32æ„›å¥½å®¶ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã¸ã‚ˆã†ã“ãï¼Facebookä¸Šã§Raspberry Piã€Arduinoã€ESP32ã«ã¤ã„ã¦ã‚‚ã£ã¨æ·±ãæŽ˜ã‚Šä¸‹ã’ã€ä»–ã®æ„›å¥½å®¶ã¨äº¤æµã—ã¾ã—ã‚‡ã†ã€‚

    **å‚åŠ ã™ã‚‹ç†ç”±ã¯ï¼Ÿ**

    - **ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã‚µãƒãƒ¼ãƒˆ**ï¼šã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚„ãƒãƒ¼ãƒ ã®åŠ©ã‘ã‚’å€Ÿã‚Šã¦ã€è²©å£²å¾Œã®å•é¡Œã‚„æŠ€è¡“çš„ãªèª²é¡Œã‚’è§£æ±ºã—ã¾ã™ã€‚
    - **å­¦ã³ï¼†å…±æœ‰**ï¼šãƒ’ãƒ³ãƒˆã‚„ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’äº¤æ›ã—ã¦ã‚¹ã‚­ãƒ«ã‚’å‘ä¸Šã•ã›ã¾ã—ã‚‡ã†ã€‚
    - **ç‹¬å çš„ãªãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**ï¼šæ–°è£½å“ã®ç™ºè¡¨ã‚„å…ˆè¡Œãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«æ—©æœŸã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã—ã‚‡ã†ã€‚
    - **ç‰¹åˆ¥å‰²å¼•**ï¼šæœ€æ–°è£½å“ã®ç‹¬å å‰²å¼•ã‚’ãŠæ¥½ã—ã¿ãã ã•ã„ã€‚
    - **ç¥­ã‚Šã®ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‚®ãƒ•ãƒˆ**ï¼šã‚®ãƒ•ãƒˆã‚„ç¥æ—¥ã®ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã«å‚åŠ ã—ã¾ã—ã‚‡ã†ã€‚

    ðŸ‘‰ ç§ãŸã¡ã¨ä¸€ç·’ã«æŽ¢ç´¢ã—ã€å‰µé€ ã™ã‚‹æº–å‚™ã¯ã§ãã¦ã„ã¾ã™ã‹ï¼Ÿ[|link_sf_facebook|]ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä»Šã™ãå‚åŠ ã—ã¾ã—ã‚‡ã†ï¼

.. _metronome:

ãƒ¡ãƒˆãƒ­ãƒŽãƒ¼ãƒ 
====================

ã“ã¡ã‚‰ã§ã¯ãƒ¡ãƒˆãƒ­ãƒŽãƒ¼ãƒ ã‚’ä½œæˆã—ã¾ã™ã€‚ã“ã®ãƒ¡ãƒˆãƒ­ãƒŽãƒ¼ãƒ ã¯5ãƒ¬ãƒ™ãƒ«ã«åˆ†ã‘ã‚‰ã‚Œã¦ãŠã‚Šã€ãƒ¬ãƒ™ãƒ«ãŒé«˜ã„ã»ã©ãƒ–ã‚¶ãƒ¼ã®å‘¼ã³å‡ºã—ãŒç·Šæ€¥ã«ãªã‚Šã¾ã™ã€‚

.. image:: img/metronome.png

**å¿…è¦ãªéƒ¨å“**

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ã€ä»¥ä¸‹ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå¿…è¦ã§ã™ã€‚

å…¨ä½“ã®ã‚­ãƒƒãƒˆã‚’è³¼å…¥ã™ã‚‹ã“ã¨ã¯éžå¸¸ã«ä¾¿åˆ©ã§ã™ã€‚ãƒªãƒ³ã‚¯ã¯ã“ã¡ã‚‰ï¼š

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - åå‰	
        - ã“ã®ã‚­ãƒƒãƒˆã®ã‚¢ã‚¤ãƒ†ãƒ 
        - ãƒªãƒ³ã‚¯
    *   - Raphael Kit
        - 337
        - |link_Raphael_kit|

ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯ã‹ã‚‰ã‚‚åˆ¥ã€…ã«è³¼å…¥ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

.. list-table::
    :widths: 30 20
    :header-rows: 1

    *   - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ç´¹ä»‹
        - è³¼å…¥ãƒªãƒ³ã‚¯

    *   - :ref:`cpn_gpio_board`
        - |link_gpio_board_buy|
    *   - :ref:`cpn_breadboard`
        - |link_breadboard_buy|
    *   - :ref:`cpn_wires`
        - |link_wires_buy|
    *   - :ref:`cpn_buzzer`
        - |link_passive_buzzer_buy|
    *   - :ref:`cpn_transistor`
        - |link_transistor_buy|

**é…ç·šå›³**

.. image:: img/image106.png

.. note::

    ã“ã“ã§ã¯ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ–ã‚¶ãƒ¼ãŒä½¿ç”¨ã•ã‚Œã¦ãŠã‚Šã€ç™½ã„ã‚¹ãƒ†ãƒƒã‚«ãƒ¼ãŒä»˜ã„ã¦ã„ã¾ã™ã€‚

**ã‚¹ã‚±ãƒƒãƒ**

.. code-block:: Arduino

    import processing.io.*;

    int level = 0;
    int buzzerPin = 17;
    int levelRange=5;
    Slider mySlider;

    void setup() {
        size(400, 200);
        frameRate(50);
        mySlider = new Slider(width * 0.2,height * 0.4,width * 0.8,height * 0.6,0,levelRange,level);
        GPIO.pinMode(buzzerPin, GPIO.OUTPUT);
    }

    void draw() {

        background(255);
        mySlider.show();
        if(level==0){
            GPIO.digitalWrite(buzzerPin, GPIO.HIGH);
        }else if((frameCount/5) % (levelRange-level+1) ==0){
            GPIO.digitalWrite(buzzerPin, GPIO.LOW);
        }else{
            GPIO.digitalWrite(buzzerPin, GPIO.HIGH);
        }
    }

    void mouseDragged(){
        level = mySlider.dragPoint(mouseX,mouseY);
    }

    class Slider{
        float slotPointAX;
        float slotPointBX;
        float slotPointAY;
        float slotPointBY;
        float linePoint;
        float depth;
        int maxRange;
        int minRange;
        int value;

        Slider(float ax, float ay, float bx, float by, int min, int max, int v){
            slotPointAX = ax;
            slotPointAY = ay;
            slotPointBX = bx;
            slotPointBY = by;
            maxRange = max;
            minRange = min;
            value = v;
            linePoint = slotPointAX;// + map(value, minRange, maxRange, slotPointAX, slotPointBX);
            depth = (slotPointBY - slotPointAY)*0.75;
        }

        void show(){
            rectMode(CORNERS);
            fill(200);
            stroke(255,0,0);
            rect(slotPointAX, slotPointAY, slotPointBX, slotPointBY);
            fill(255,0,0);
            rect(slotPointAX, slotPointAY, linePoint, slotPointBY);
            fill(200);
            textSize(depth);
            text(minRange, slotPointAX, slotPointBY+depth);
            text(maxRange, slotPointBX, slotPointBY+depth);
            text(value, linePoint, slotPointAY);
        }

        int dragPoint(float mx, float my){
            if(mx>=slotPointAX && mx<=slotPointBX && my>=slotPointAY && my<=slotPointBY){
                value = int(map(mx,slotPointAX,slotPointBX,minRange,maxRange));
                linePoint = map(value,minRange,maxRange,slotPointAX,slotPointBX);
            }
            return value;
        }
    }

**ã©ã®ã‚ˆã†ã«å‹•ä½œã™ã‚‹ã®ã‹ï¼Ÿ**

.. å‰ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨åŒã˜ã‚ˆã†ã«ã€ ``Slider`` ã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã—ã€ãã‚Œã‚’**WIDGET**ã¨ã—ã¦æ©Ÿèƒ½ã•ã›ã¾ã—ãŸã€‚

.. ã—ã‹ã—ã€ ``dragPoint()`` ã¯å°‘ã—ä¿®æ­£ã•ã‚Œã¦ãŠã‚Šã€ã‚¹ãƒ©ã‚¤ãƒ‰ã™ã‚‹éš›ã«é€£ç¶šã—ãªã„ç‰¹å¾´ã‚’æŒã¡ã€ãƒ¬ãƒ™ãƒ«èª¿æ•´ã«ã‚ˆã‚Šé©ã—ã¦ã„ã¾ã™ã€‚

.. .. code-block:: Arduino

..     int dragPoint(float mx, float my){
..         if(mx>=slotPointAX && mx<=slotPointBX && my>=slotPointAY && my<=slotPointBY){
..             value = int(map(mx,slotPointAX,slotPointBX,minRange,maxRange));
..             linePoint = map(value,minRange,maxRange,slotPointAX,slotPointBX);
..         }
..         return value;
..     }

ã“ã“ã§ã¯ã€ ``Slider`` ã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã—ã€ãã‚Œã‚’ **WIDGET** ã¨ã—ã¦æ©Ÿèƒ½ã•ã›ã¾ã—ãŸã€‚

.. code-block:: arduino

    Slider(ax, ay, bx, by, min, max, v)

å®£è¨€ã«ã¯ã€7ã¤ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

æœ€åˆã®4ã¤ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ã€ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã®ã‚µã‚¤ã‚ºã‚’æ±ºå®šã—ã€å·¦ä¸Šã®é–‹å§‹ç‚¹ã®åº§æ¨™(x1, y1)ã¨å³ä¸‹ã®åº§æ¨™(x2, y2)ã«ç¶šãã¾ã™ã€‚

æœ€å¾Œã®3ã¤ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ã€ãã®æ•°å€¤ç¯„å›²ï¼ˆæœ€å°ã‹ã‚‰æœ€å¤§ï¼‰ã¨åˆæœŸå€¤ã‚’æ±ºå®šã—ã¾ã™ã€‚

2ã¤ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚ã‚Šã¾ã™ã€‚ ``dragPoint()`` ã®åŠ¹æžœã¯ã€ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚’ãƒ‰ãƒ©ãƒƒã‚°å¯èƒ½ã«ã—ã€ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®ç¾åœ¨ã®ä½ç½®å€¤ã‚’è¿”ã™ã“ã¨ã§ã™ã€‚

.. code-block:: arduino

    int dragPoint(float mx, float my){
        if(mx>=slotPointAX && mx<=slotPointBX && my>=slotPointAY && my<=slotPointBY){
            value = int(map(mx,slotPointAX,slotPointBX,minRange,maxRange));
            linePoint = map(value,minRange,maxRange,slotPointAX,slotPointBX);
        }
        return value;
    }

ã‚‚ã†ä¸€ã¤ã®ãƒ¡ã‚½ãƒƒãƒ‰ ``show()`` ã¯ã€ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã™ã€‚åŒæ™‚ã«ã€å¯¾å¿œã™ã‚‹ä½ç½®ã«ç¯„å›²å€¤ã¨ç¾åœ¨å€¤ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

.. code-block:: arduino

    void show(){
        rectMode(CORNERS);
        fill(200);
        stroke(255,0,0);
        rect(slotPointAX, slotPointAY, slotPointBX, slotPointBY);
        fill(255,0,0);
        rect(slotPointAX, slotPointAY, linePoint, slotPointBY);
        fill(200);
        textSize(depth);
        text(minRange, slotPointAX, slotPointBY+depth);
        text(maxRange, slotPointBX, slotPointBY+depth);
        text(value, linePoint, slotPointAY);
    }