.. _3.1.4_py:

3.1.4 Synthèse Vocale (TTS)
==============================

Introduction
---------------

Nous rencontrons souvent la technologie TTS (Text-to-Speech), qui convertit le texte en parole naturelle, offrant une expérience interactive agréable. 

Essayons de faire parler votre projet.



Composants Nécessaires
----------------------

Pour ce projet, nous avons besoin des composants suivants. 

.. image:: ../img/audio2.png
    :width: 700
    :align: center

Il est vraiment pratique d'acheter un kit complet, voici le lien : 

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - Nom	
        - ARTICLES DANS CE KIT
        - LIEN
    *   - Kit Raphael
        - 337
        - |link_Raphael_kit|

Vous pouvez également les acheter séparément à partir des liens ci-dessous.

.. list-table::
    :widths: 30 20
    :header-rows: 1

    *   - INTRODUCTION DU COMPOSANT
        - LIEN D'ACHAT

    *   - :ref:`cpn_gpio_extension_board`
        - |link_gpio_board_buy|
    *   - :ref:`cpn_breadboard`
        - |link_breadboard_buy|
    *   - :ref:`cpn_audio_speaker`
        - \-

Procédures Expérimentales
-----------------------------

**Étape 1 :** Construisez le circuit.

.. image:: ../img/4.1.4fritzing.png
    :width: 800
    :align: center   

Après avoir construit le circuit selon le schéma ci-dessus, branchez le câble audio dans la prise audio 3,5 mm du Raspberry Pi.

.. image:: ../img/audio4.png
    :width: 400
    :align: center
**Étape 2 :** Installer le module ``espeak``.

.. raw:: html

   <run></run>

.. code-block::

    sudo apt-get install espeak -y

**Étape 3 :** Accédez au dossier du code.

.. raw:: html

   <run></run>

.. code-block::

    cd ~/raphael-kit/python/

**Étape 4 :** Exécutez.

.. raw:: html

   <run></run>

.. code-block::

    python3 3.1.4_Text-to-speech.py

Le Raspberry Pi vous saluera gentiment après l'exécution du code et vous dira au revoir lorsque le code s'arrêtera.

.. note::

    Si votre haut-parleur n'émet aucun son, cela peut être dû au fait que le Raspberry Pi a sélectionné une mauvaise sortie audio (la sortie par défaut est HDMI). Vous devez alors :ref:`changer_sortie_audio` vers les écouteurs.

    Si vous trouvez que le volume des haut-parleurs est trop faible, vous pouvez :ref:`ajuster_volume`.

**Code**

.. note::
    Vous pouvez **Modifier/Réinitialiser/Copier/Exécuter/Arrêter** le code ci-dessous. Mais avant cela, vous devez accéder au chemin du code source comme ``raphael-kit/python``. Après avoir modifié le code, vous pouvez l'exécuter directement pour voir l'effet. Une fois confirmé qu'il n'y a pas de problème, vous pouvez utiliser le bouton Copier pour copier le code modifié, puis ouvrir le code source dans le Terminal via la commande ``nano`` et le coller.

.. raw:: html

    <run></run>

.. code-block:: python

    from tts import TTS

    tts = TTS(engine="espeak")
    tts.lang('en-US')

    def main():
        tts.say('Hello, nice to meet you!')

    def destroy():
        tts.say('See you later')

    if __name__ == '__main__':
        try:
            main()
        except KeyboardInterrupt:
            destroy()

**Explication du Code**

.. code-block:: python

    from tts import TTS

    tts = TTS(engine="espeak")

Importer la classe TTS et instancier un objet.

.. code-block:: python

    tts.lang('en-US')

Définir la langue.

.. note::
    Actuellement, la langue commutable ne supporte que l'anglais.

.. code-block:: python

    tts.say("Hello, nice to meet you!")

Remplissez le texte à dire en tant que paramètre. Après avoir exécuté ``tts.say()``, le Raspberry Pi dira le texte que vous avez écrit.

Image du Phénomène
------------------------

.. image:: ../img/3.1.3audio.JPG
   :align: center
