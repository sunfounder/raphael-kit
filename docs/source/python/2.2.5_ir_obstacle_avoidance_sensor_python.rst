.. note::

    Hola, bienvenido a la comunidad de entusiastas de SunFounder Raspberry Pi & Arduino & ESP32 en Facebook! Sum茅rgete m谩s en Raspberry Pi, Arduino y ESP32 con otros entusiastas.

    **驴Por qu茅 unirse?**

    - **Soporte de expertos**: Resuelve problemas post-venta y desaf铆os t茅cnicos con la ayuda de nuestra comunidad y equipo.
    - **Aprende y comparte**: Intercambia consejos y tutoriales para mejorar tus habilidades.
    - **Previsualizaciones exclusivas**: Obt茅n acceso temprano a anuncios de nuevos productos y avances.
    - **Descuentos especiales**: Disfruta de descuentos exclusivos en nuestros productos m谩s nuevos.
    - **Promociones y sorteos festivos**: Participa en sorteos y promociones de temporada.

     驴Listo para explorar y crear con nosotros? Haz clic en [|link_sf_facebook|] y 煤nete hoy mismo!

.. _2.2.5_py:

2.2.5 Sensor de evitaci贸n de obst谩culos por infrarrojos
===========================================================

Introducci贸n
-------------------

En este proyecto, aprenderemos sobre el m贸dulo de evitaci贸n de obst谩culos por infrarrojos, que es un m贸dulo sensor que puede usarse para detectar obst谩culos a cortas distancias, con poca interferencia, f谩cil de montar y usar, etc. Puede utilizarse ampliamente en robots de evitaci贸n de obst谩culos, carritos de evitaci贸n de obst谩culos, conteo en l铆neas de montaje, etc.

.. image:: ../img/2.2.5IR_Obstacle.png
   :width: 300
   :align: center

Componentes necesarios
--------------------------------

En este proyecto, necesitamos los siguientes componentes.

.. image:: ../img/2.2.5component.png
   :width: 700
   :align: center

Es definitivamente conveniente comprar un kit completo, aqu铆 est谩 el enlace:

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - Nombre	
        - ARTCULOS EN ESTE KIT
        - ENLACE
    *   - Kit Raphael
        - 337
        - |link_Raphael_kit|

Tambi茅n puedes comprarlos por separado en los enlaces a continuaci贸n.

.. list-table::
    :widths: 30 20
    :header-rows: 1

    *   - INTRODUCCIN DE COMPONENTES
        - ENLACE DE COMPRA

    *   - :ref:`cpn_gpio_board`
        - |link_gpio_board_buy|
    *   - :ref:`cpn_breadboard`
        - |link_breadboard_buy|
    *   - :ref:`cpn_wires`
        - |link_wires_buy|
    *   - :ref:`cpn_avoid_module`
        - |link_obstacle_avoidance_buy|

Diagrama esquem谩tico
-------------------------

.. image:: ../img/IR_schematic.png
   :width: 500
   :align: center

Procedimientos experimentales
----------------------------------------

**Paso 1:** Monta el circuito.

.. image:: ../img/2.2.5fritzing.png
   :width: 700
   :align: center

**Paso 2:** Cambia el directorio.

.. raw:: html

   <run></run>

.. code-block::
   
   cd ~/raphael-kit/python

**Paso 3:** Ejecuta.

.. raw:: html

   <run></run>

.. code-block::

   sudo python3 2.2.5_IrObstacle.py

Despu茅s de ejecutar el c贸digo, cuando pongas tu mano frente a la sonda del m贸dulo, 
el indicador de salida en el m贸dulo se iluminar谩 y "隆Barrera detectada!" se imprimir谩 
repetidamente en la pantalla hasta que retires la mano.


**C贸digo**

.. note::

   Puedes **Modificar/Restablecer/Copiar/Ejecutar/Detener** el c贸digo a continuaci贸n. Pero antes de eso, necesitas ir a la ruta del c贸digo fuente como ``raphael-kit/python``. Despu茅s de modificar el c贸digo, puedes ejecutarlo directamente para ver el efecto.


.. raw:: html

    <run></run>

.. code-block:: python

   #!/usr/bin/env python3
   import RPi.GPIO as GPIO
   import time

   ObstaclePin = 17

   def setup():
      GPIO.setmode(GPIO.BCM)       # Numeraci贸n de GPIOs por ubicaci贸n f铆sica
      GPIO.setup(ObstaclePin, GPIO.IN, pull_up_down=GPIO.PUD_UP)

   def loop():
      while True:
         if (0 == GPIO.input(ObstaclePin)):
            print ("Detected Barrier!")
            time.sleep(1)

   def destroy():
      GPIO.cleanup()                     # Liberar recursos

   if __name__ == '__main__':     # El programa comienza aqu铆
      setup()
      try:
         loop()
      except KeyboardInterrupt:  # Cuando se presiona 'Ctrl+C', se ejecuta el programa destroy().
         destroy()

**Explicaci贸n del C贸digo**

.. code-block:: python

   def setup():
   GPIO.setmode(GPIO.BCM)       # Numeraci贸n de GPIOs por ubicaci贸n f铆sica
   GPIO.setup(ObstaclePin, GPIO.IN, pull_up_down=GPIO.PUD_UP)

Configura el modo GPIO en Numeraci贸n BCM. Configura ``ObstaclePin`` en modo de entrada e inicial铆zalo a nivel alto (3.3v).

.. code-block:: python

   def loop():
      while True:
         if (0 == GPIO.input(ObstaclePin)):
            print ("Detected Barrier!")

Cuando ``ObstaclePin`` est谩 en nivel bajo, imprime "隆Obst谩culo Detectado!". Esto significa que se ha detectado un obst谩culo.

Foto del Fen贸meno
-----------------------

.. image:: ../img/2.2.5IR.JPG
   :width: 500
   :align: center