.. note::

    Bonjour et bienvenue dans la CommunautÃ© Facebook des passionnÃ©s de Raspberry Pi, Arduino et ESP32 de SunFounder ! Plongez plus profondÃ©ment dans l'univers des Raspberry Pi, Arduino et ESP32 avec d'autres passionnÃ©s.

    **Pourquoi rejoindre ?**

    - **Support d'experts** : RÃ©solvez les problÃ¨mes aprÃ¨s-vente et les dÃ©fis techniques avec l'aide de notre communautÃ© et de notre Ã©quipe.
    - **Apprendre et partager** : Ã‰changez des astuces et des tutoriels pour amÃ©liorer vos compÃ©tences.
    - **AperÃ§us exclusifs** : AccÃ©dez en avant-premiÃ¨re aux annonces de nouveaux produits et aux aperÃ§us.
    - **RÃ©ductions spÃ©ciales** : Profitez de rÃ©ductions exclusives sur nos produits les plus rÃ©cents.
    - **Promotions festives et cadeaux** : Participez Ã  des cadeaux et des promotions de vacances.

    ğŸ‘‰ PrÃªt Ã  explorer et Ã  crÃ©er avec nous ? Cliquez [|link_sf_facebook|] et rejoignez-nous aujourd'hui !

.. _4.1.16_py:

4.1.16 GÃ©nÃ©rateur de Code Morse
======================================

Introduction
-------------------

Dans ce projet, nous allons crÃ©er un gÃ©nÃ©rateur de code Morse, oÃ¹ vous tapez une sÃ©rie de lettres anglaises dans le Raspberry Pi pour les transformer en code Morse.

Composants Requis
--------------------------------

Pour ce projet, nous avons besoin des composants suivants.

.. image:: ../img/list_Morse_Code_Generator.png
    :align: center

Il est certainement pratique d'acheter un kit complet, voici le lien :

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - Nom	
        - Ã‰LÃ‰MENTS DANS CE KIT
        - LIEN
    *   - Kit Raphael
        - 337
        - |link_Raphael_kit|

Vous pouvez Ã©galement les acheter sÃ©parÃ©ment Ã  partir des liens ci-dessous.

.. list-table::
    :widths: 30 20
    :header-rows: 1

    *   - INTRODUCTION DU COMPOSANT
        - LIEN D'ACHAT

    *   - :ref:`cpn_gpio_extension_board`
        - |link_gpio_board_buy|
    *   - :ref:`cpn_breadboard`
        - |link_breadboard_buy|
    *   - :ref:`cpn_wires`
        - |link_wires_buy|
    *   - :ref:`cpn_resistor`
        - |link_resistor_buy|
    *   - :ref:`cpn_led`
        - |link_led_buy|
    *   - :ref:`cpn_buzzer`
        - \-
    *   - :ref:`cpn_transistor`
        - |link_transistor_buy|

SchÃ©ma de CÃ¢blage
--------------------------

============ ======== ======== ===
Nom T-Board  physique wiringPi BCM
GPIO17       Pin 11   0        17
GPIO22       Pin 15   3        22
============ ======== ======== ===

.. image:: ../img/Schematic_three_one11.png
   :align: center

ProcÃ©dures ExpÃ©rimentales
----------------------------

**Ã‰tape 1 :** Construisez le circuit. (Faites attention aux pÃ´les du buzzer : Celui avec le label + est le pÃ´le positif et l'autre est le pÃ´le nÃ©gatif.)

.. image:: ../img/image269.png

**Ã‰tape 2** : Ouvrez le fichier de code.

.. raw:: html

   <run></run>

.. code-block::

    cd ~/raphael-kit/python

**Ã‰tape 3** : ExÃ©cutez.

.. raw:: html

   <run></run>

.. code-block::

    sudo python3 4.1.16_MorseCodeGenerator.py

AprÃ¨s l'exÃ©cution du programme, tapez une sÃ©rie de caractÃ¨res, et le buzzer ainsi que la LED 
enverront les signaux correspondants en code Morse.
**Code**

.. code-block:: python

    #!/usr/bin/env python3
    import RPi.GPIO as GPIO
    import time

    BeepPin=22
    ALedPin=17

    MORSECODE = {
        'A':'01', 'B':'1000', 'C':'1010', 'D':'100', 'E':'0', 'F':'0010', 'G':'110',
        'H':'0000', 'I':'00', 'J':'0111', 'K':'101', 'L':'0100', 'M':'11', 'N':'10',
        'O':'111', 'P':'0110', 'Q':'1101', 'R':'010', 'S':'000', 'T':'1',
        'U':'001', 'V':'0001', 'W':'011', 'X':'1001', 'Y':'1011', 'Z':'1100',
        '1':'01111', '2':'00111', '3':'00011', '4':'00001', '5':'00000',
        '6':'10000', '7':'11000', '8':'11100', '9':'11110', '0':'11111',
        '?':'001100', '/':'10010', ',':'110011', '.':'010101', ';':'101010',
        '!':'101011', '@':'011010', ':':'111000',
        }

    def setup():
        GPIO.setmode(GPIO.BCM)
        GPIO.setup(BeepPin, GPIO.OUT, initial=GPIO.LOW)
        GPIO.setup(ALedPin,GPIO.OUT,initial=GPIO.LOW)

    def on():
        GPIO.output(BeepPin, 1)
        GPIO.output(ALedPin, 1)

    def off():
        GPIO.output(BeepPin, 0)
        GPIO.output(ALedPin, 0)

    def beep(dt):	# dt for delay time.
        on()
        time.sleep(dt)
        off()
        time.sleep(dt)

    def morsecode(code):
        pause = 0.25
        for letter in code:
            for tap in MORSECODE[letter]:
                if tap == '0':
                    beep(pause/2)
                if tap == '1':
                    beep(pause)
            time.sleep(pause)

    def main():
        while True:
            code=input("Please input the messenger:")
            code = code.upper()
            print(code)
            morsecode(code)

    def destroy():
        print("")
        GPIO.output(BeepPin, GPIO.LOW)
        GPIO.output(ALedPin, GPIO.LOW)
        GPIO.cleanup()  

    if __name__ == '__main__':
        setup()
        try:
            main()
        except KeyboardInterrupt:
            destroy()

**Explication du Code**

.. code-block:: python

    MORSECODEÂ =Â {
    Â Â Â Â 'A':'01',Â 'B':'1000',Â 'C':'1010',Â 'D':'100',Â 'E':'0',Â 'F':'0010',Â 'G':'110',
    Â Â Â Â 'H':'0000',Â 'I':'00',Â 'J':'0111',Â 'K':'101',Â 'L':'0100',Â 'M':'11',Â 'N':'10',
    Â Â Â Â 'O':'111',Â 'P':'0110',Â 'Q':'1101',Â 'R':'010',Â 'S':'000',Â 'T':'1',
    Â Â Â Â 'U':'001',Â 'V':'0001',Â 'W':'011',Â 'X':'1001',Â 'Y':'1011',Â 'Z':'1100',
    Â Â Â Â '1':'01111',Â '2':'00111',Â '3':'00011',Â '4':'00001',Â '5':'00000',
    Â Â Â Â '6':'10000',Â '7':'11000',Â '8':'11100',Â '9':'11110',Â '0':'11111',
    Â Â Â Â '?':'001100',Â '/':'10010',Â ',':'110011',Â '.':'010101',Â ';':'101010',
    Â Â Â Â '!':'101011',Â '@':'011010',Â ':':'111000',
    Â Â Â Â }

Cette structure MORSE est le dictionnaire du code Morse, contenant les caractÃ¨res A-Z, 
les chiffres 0-9 et les signes â€œ?â€ â€œ/â€ â€œ:â€ â€œ,â€ â€œ.â€ â€œ;â€ â€œ!â€ â€œ@â€.

.. code-block:: python

    defÂ on():
    Â Â Â Â GPIO.output(BeepPin,Â 1)
    Â Â Â Â GPIO.output(ALedPin,Â 1)

La fonction ``on()`` dÃ©marre le buzzer et la LED.

.. code-block:: python

    defÂ off():
    Â Â Â Â GPIO.output(BeepPin,Â 0)
    Â Â Â Â GPIO.output(ALedPin,Â 0)

La fonction ``off()`` est utilisÃ©e pour Ã©teindre le buzzer et la LED.

.. code-block:: python

    defÂ beep(dt):Â Â Â #Â dt pour le temps de retard.
    Â Â Â Â on()
    Â Â Â Â time.sleep(dt)
    Â Â Â Â off()
    Â Â Â Â time.sleep(dt)

DÃ©finir une fonction ``beep()`` pour faire Ã©mettre des sons et clignoter la LED et le buzzer 
Ã  un intervalle donnÃ© de ``dt``.

.. code-block:: python

    defÂ morsecode(code):
    Â Â Â Â pauseÂ =Â 0.25
    Â Â Â Â forÂ letterÂ inÂ code:
    Â Â Â Â Â Â Â Â forÂ tapÂ inÂ MORSECODE[letter]:
    Â Â Â Â Â Â Â Â Â Â Â Â ifÂ tapÂ ==Â '0':
    Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â beep(pause/2)
    Â Â Â Â Â Â Â Â Â Â Â Â ifÂ tapÂ ==Â '1':
    Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â beep(pause)
    Â Â Â Â Â Â Â Â time.sleep(pause)

La fonction ``morsecode()`` est utilisÃ©e pour traiter le code Morse des caractÃ¨res entrÃ©s en 
faisant en sorte que les â€œ1â€ du code Ã©mettent des sons ou des lumiÃ¨res et que les â€œ0â€ Ã©mettent 
briÃ¨vement des sons ou des lumiÃ¨res. Par exemple, entrez â€œSOSâ€, et il y aura un signal contenant 
trois segments courts, trois longs, puis trois courts â€œ Â· Â· Â· - - - Â· Â· Â· â€.

.. code-block:: python

    defÂ main():
    Â Â Â Â whileÂ True:
    Â Â Â Â Â Â Â Â code=input("PleaseÂ inputÂ theÂ messenger:")
    Â Â Â Â Â Â Â Â codeÂ =Â code.upper()
    Â Â Â Â Â Â Â Â print(code)
    Â Â Â Â Â Â Â Â morsecode(code)

Lorsque vous tapez les caractÃ¨res correspondants avec le clavier, ``upper()`` convertira les 
lettres entrÃ©es en majuscules.

``printf()`` imprime ensuite le texte en clair sur l'Ã©cran de l'ordinateur, et la fonction 
``morsecod()`` fait Ã©mettre le code Morse par le buzzer et la LED.


Image du PhÃ©nomÃ¨ne
-----------------------

.. image:: ../img/image270.jpeg
   :align: center