.. note::

    こんにちは、SunFounderのRaspberry Pi & Arduino & ESP32愛好家コミュニティへようこそ！Facebook上でRaspberry Pi、Arduino、ESP32についてもっと深く掘り下げ、他の愛好家と交流しましょう。

    **参加する理由は？**

    - **エキスパートサポート**：コミュニティやチームの助けを借りて、販売後の問題や技術的な課題を解決します。
    - **学び＆共有**：ヒントやチュートリアルを交換してスキルを向上させましょう。
    - **独占的なプレビュー**：新製品の発表や先行プレビューに早期アクセスしましょう。
    - **特別割引**：最新製品の独占割引をお楽しみください。
    - **祭りのプロモーションとギフト**：ギフトや祝日のプロモーションに参加しましょう。

    👉 私たちと一緒に探索し、創造する準備はできていますか？[|link_sf_facebook|]をクリックして今すぐ参加しましょう！

.. _1.1.7_c_pi5:

1.1.7 I2C LCD1602
=======================

はじめに
------------------

LCD1602は、文字タイプの液晶ディスプレイで、同時に32 (16*2) 文字を表示することができます。

必要な部品
------------------------------

このプロジェクトでは、以下の部品が必要です。

.. image:: ../img/list_i2c_lcd.png

全体のキットを購入するのは間違いなく便利です。以下がリンクです:

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - 名前
        - このキットのアイテム
        - リンク
    *   - Raphael Kit
        - 337
        - |link_Raphael_kit|

以下のリンクから別々に購入することもできます。

.. list-table::
    :widths: 30 20
    :header-rows: 1

    *   - コンポーネントの紹介
        - 購入リンク

    *   - :ref:`cpn_gpio_board`
        - |link_gpio_board_buy|
    *   - :ref:`cpn_breadboard`
        - |link_breadboard_buy|
    *   - :ref:`cpn_wires`
        - |link_wires_buy|
    *   - :ref:`cpn_i2c_lcd`
        - |link_i2clcd1602_buy|

回路図
---------------------

============ ========
T-Board Name physical
SDA1         Pin 3
SCL1         Pin 5
============ ========

.. image:: ../img/schematic_i2c_lcd.png

実験手順
-----------------------------

**ステップ1:** 回路を作成します。

.. image:: ../img/image96.png

**ステップ2**: I2Cの設定をします（ :ref:`I2C設定` を参照。もしすでにI2Cを設定している場合は、このステップをスキップしてください。）

**ステップ3:** ディレクトリを変更します。

.. raw:: html

   <run></run>

.. code-block::

    cd ~/raphael-kit/c/1.1.7/

**ステップ4:** コードをコンパイルします。

.. raw:: html

   <run></run>

.. code-block::

    gcc 1.1.7_Lcd1602.c -lwiringPi

**ステップ5:** 実行ファイルを実行します。

.. raw:: html

   <run></run>

.. code-block::

    sudo ./a.out

コードを実行した後、LCDに ``Greetings!, From SunFounder`` と表示されます。

.. note::

    * 実行後に動作しない、またはエラーメッセージ ``wiringPi.h: No such file or directory`` が表示された場合、 :ref:`install_wiringpi` を参照してください。
    * ``Unable to open I2C device: No such file or directory`` というエラーが表示された場合、 :ref:`i2c_config` でI2Cを有効にし、配線が正しいか確認してください。
    * コードと配線が正しくてもLCDに内容が表示されない場合は、背面のポテンショメータを回してコントラストを上げることができます。

**コード**

* `1.1.7_Lcd1602.c <https://github.com/sunfounder/raphael-kit/blob/master/c/1.1.7/1.1.7_Lcd1602.c>`_

**コード説明**

.. code-block::

    void write_word(int data){……}
    void send_command(int comm){……}
    void send_data(int data){……}
    void init(){……}
    void clear(){……}
    void write(int x, int y, char data[]){……}

これらの関数は、I2C LCD1602のオープンソースコードを制御するために使用されます。これにより、I2C LCD1602の使用が容易になります。
これらの関数の中で、 ``init()`` は初期化用、 ``clear()`` は画面をクリアするためのもの、 ``write()`` は表示するものを書き込むためのものであり、他の関数は上記の関数をサポートするためのものです。

.. code-block:: c

    fd = wiringPiI2CSetup(LCDAddr);

この関数は、指定されたデバイス記号でI2Cシステムを初期化します。関数のプロトタイプ:

.. code-block:: c

    int wiringPiI2CSetup(int devId);

パラメータdevIdは、I2Cデバイスのアドレスで、i2cdetectコマンド(参考文献参照)を使用して見つけることができます。I2C LCD1602のdevIdは通常0x27です。

.. code-block:: c

    void write(int x, int y, char data[]){}

この関数の中で、 ``data[]`` はLCDに印刷される文字であり、パラメータxとyは印刷位置を決定します（行y+1、列x+1が印刷される文字の開始位置です）。

現象の画像
--------------------------

.. image:: ../img/image97.jpeg
