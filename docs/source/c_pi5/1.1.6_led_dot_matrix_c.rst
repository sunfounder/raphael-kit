.. note::

    ã“ã‚“ã«ã¡ã¯ã€SunFounderã®Raspberry Pi & Arduino & ESP32æ„›å¥½å®¶ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã¸ã‚ˆã†ã“ãï¼Facebookä¸Šã§Raspberry Piã€Arduinoã€ESP32ã«ã¤ã„ã¦ã‚‚ã£ã¨æ·±ãæ˜ã‚Šä¸‹ã’ã€ä»–ã®æ„›å¥½å®¶ã¨äº¤æµã—ã¾ã—ã‚‡ã†ã€‚

    **å‚åŠ ã™ã‚‹ç†ç”±ã¯ï¼Ÿ**

    - **ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã‚µãƒãƒ¼ãƒˆ**ï¼šã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚„ãƒãƒ¼ãƒ ã®åŠ©ã‘ã‚’å€Ÿã‚Šã¦ã€è²©å£²å¾Œã®å•é¡Œã‚„æŠ€è¡“çš„ãªèª²é¡Œã‚’è§£æ±ºã—ã¾ã™ã€‚
    - **å­¦ã³ï¼†å…±æœ‰**ï¼šãƒ’ãƒ³ãƒˆã‚„ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’äº¤æ›ã—ã¦ã‚¹ã‚­ãƒ«ã‚’å‘ä¸Šã•ã›ã¾ã—ã‚‡ã†ã€‚
    - **ç‹¬å çš„ãªãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**ï¼šæ–°è£½å“ã®ç™ºè¡¨ã‚„å…ˆè¡Œãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«æ—©æœŸã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã—ã‚‡ã†ã€‚
    - **ç‰¹åˆ¥å‰²å¼•**ï¼šæœ€æ–°è£½å“ã®ç‹¬å å‰²å¼•ã‚’ãŠæ¥½ã—ã¿ãã ã•ã„ã€‚
    - **ç¥­ã‚Šã®ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‚®ãƒ•ãƒˆ**ï¼šã‚®ãƒ•ãƒˆã‚„ç¥æ—¥ã®ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã«å‚åŠ ã—ã¾ã—ã‚‡ã†ã€‚

    ğŸ‘‰ ç§ãŸã¡ã¨ä¸€ç·’ã«æ¢ç´¢ã—ã€å‰µé€ ã™ã‚‹æº–å‚™ã¯ã§ãã¦ã„ã¾ã™ã‹ï¼Ÿ[|link_sf_facebook|]ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä»Šã™ãå‚åŠ ã—ã¾ã—ã‚‡ã†ï¼

.. _1.1.6_c_pi5:

1.1.6 LEDãƒ‰ãƒƒãƒˆãƒãƒˆãƒªãƒƒã‚¯ã‚¹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
======================================

ã¯ã˜ã‚ã«
--------------------

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€LEDãƒãƒˆãƒªãƒƒã‚¯ã‚¹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ã¤ã„ã¦å­¦ã³ã¾ã™ã€‚LEDãƒãƒˆãƒªãƒƒã‚¯ã‚¹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€MAX7219ãƒ‰ãƒ©ã‚¤ãƒã‚’ä½¿ç”¨ã—ã¦8x8ã®LEDãƒãƒˆãƒªãƒƒã‚¯ã‚¹ã‚’é§†å‹•ã—ã¾ã™ã€‚

å¿…è¦ãªéƒ¨å“
------------------------------

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ä»¥ä¸‹ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå¿…è¦ã§ã™ã€‚

.. image:: ../img/list_dot.png

ä¸€å¼ã‚’è³¼å…¥ã™ã‚‹ã®ãŒä¾¿åˆ©ã§ã™ã€‚ãƒªãƒ³ã‚¯ã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - åå‰
        - ã“ã®ã‚­ãƒƒãƒˆã®ã‚¢ã‚¤ãƒ†ãƒ 
        - ãƒªãƒ³ã‚¯
    *   - Raphael Kit
        - 337
        - |link_Raphael_kit|

ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯ã‹ã‚‰å€‹åˆ¥ã«è³¼å…¥ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

.. list-table::
    :widths: 30 20
    :header-rows: 1

    *   - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ç´¹ä»‹
        - è³¼å…¥ãƒªãƒ³ã‚¯

    *   - :ref:`cpn_gpio_board`
        - |link_gpio_board_buy|
    *   - :ref:`cpn_breadboard`
        - |link_breadboard_buy|
    *   - :ref:`cpn_wires`
        - |link_wires_buy|
    *   - :ref:`cpn_dot_matrix`
        - |link_led_matrix_buy|

å›è·¯å›³
-----------------------

============ ======== ======== ====
T-Board Name physical wiringPi BCM
SPIMOSI      Pin 19   12       MOSI
SPICE0       pin 24   10       CE0
SPISCLK      Pin 23   14       SCLK
============ ======== ======== ====

.. image:: ../img/schematic_dot.png

å®Ÿé¨“ã®æ‰‹é †
----------------------------

**ã‚¹ãƒ†ãƒƒãƒ—1:** å›è·¯ã‚’çµ„ã‚€ã€‚

.. image:: ../img/1.1.6fritzing.png

**ã‚¹ãƒ†ãƒƒãƒ—2:** å®Ÿé¨“ã‚’é–‹å§‹ã™ã‚‹å‰ã«SPIã‚’ã‚ªãƒ³ã«ã—ã¦ãã ã•ã„ã€‚è©³ç´°ã¯ :ref:`spi_configuration` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

**ã‚¹ãƒ†ãƒƒãƒ—3:** ã‚³ãƒ¼ãƒ‰ã®ãƒ•ã‚©ãƒ«ãƒ€ã«ç§»å‹•ã™ã‚‹ã€‚

.. raw:: html

   <run></run>

.. code-block:: 

    cd ~/raphael-kit/c/1.1.6/

**ã‚¹ãƒ†ãƒƒãƒ—4:** ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ã€‚

.. raw:: html

   <run></run>

.. code-block:: 

    make

**ã‚¹ãƒ†ãƒƒãƒ—5:** å®Ÿè¡Œå¯èƒ½ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œã™ã‚‹ã€‚

.. raw:: html

   <run></run>

.. code-block:: 

    sudo ./1.1.6_LedMatrix

ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€LED ãƒ‰ãƒƒãƒˆãƒãƒˆãƒªãƒƒã‚¯ã‚¹ã¯ã‚¹ã‚¯ã‚¨ã‚¢ã€ãƒãƒ¼ãƒˆã€æ•°å­— 0 ã‹ã‚‰ 9 ã¾ã§é †ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

.. note::

    å®Ÿè¡Œå¾Œã«å‹•ä½œã—ãªã„ã€ã¾ãŸã¯ã‚¨ãƒ©ãƒ¼ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹å ´åˆï¼šã€ŒwiringPi.h: No such file or directoryã€ã€ :ref:`install_wiringpi_pi5` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

**ã‚³ãƒ¼ãƒ‰**

.. code-block:: c

    #include <wiringPi.h>
    #include <wiringPiSPI.h>
    #include <stdio.h>

    #define SPI_CHANNEL    0           // Define SPI channel (0 or 1)
    #define SPI_SPEED      1000000     // SPI speed set to 1 MHz

    // Function to write data to a MAX7219 register
    void max7219_write(unsigned char address, unsigned char data) {
        unsigned char buffer[2];
        buffer[0] = address;   // Register address to write to
        buffer[1] = data;      // Data to write into the register
        wiringPiSPIDataRW(SPI_CHANNEL, buffer, 2);  // Send data via SPI
    }

    // Function to initialize the MAX7219 display module
    void max7219_init() {
        max7219_write(0x09, 0x00); // Decode Mode: No decoding for digits (useful for 7-segment displays)
        max7219_write(0x0A, 0x03); // Intensity: Set brightness level (0x00 to 0x0F)
        max7219_write(0x0B, 0x07); // Scan Limit: Display digits 0-7 (all 8 digits)
        max7219_write(0x0C, 0x01); // Shutdown Register: Normal operation (not in shutdown mode)
        max7219_write(0x0F, 0x00); // Display Test: Normal operation (no test mode)

        // Clear all digits on the display
        for (int i = 1; i <= 8; i++) {
            max7219_write(i, 0x00); // Write 0 to each digit register
        }
    }

    // Function to display a pattern on the MAX7219
    void max7219_display(unsigned char *data) {
        for (int i = 1; i <= 8; i++) {
            max7219_write(i, data[i - 1]); // Write each row of the pattern to the display
        }
    }

    // Function to display a pattern for a specified duration
    void display_pattern(const unsigned char pattern[8], int delay_ms) {
        max7219_display((unsigned char *)pattern); // Display the pattern
        delay(delay_ms);                           // Wait for the specified time in milliseconds
    }

    // Array of patterns to display
    const unsigned char patterns[][8] = {
        // Square pattern
        {
            0b11111111, // Row 1
            0b10000001, // Row 2
            0b10000001, // Row 3
            0b10000001, // Row 4
            0b10000001, // Row 5
            0b10000001, // Row 6
            0b10000001, // Row 7
            0b11111111  // Row 8
        },
        // Heart pattern
        {
            0b01100110, // Row 1
            0b11111111, // Row 2
            0b11111111, // Row 3
            0b11111111, // Row 4
            0b01111110, // Row 5
            0b00111100, // Row 6
            0b00011000, // Row 7
            0b00000000  // Row 8
        },
        // Number 0
        {
            0b00111100, // Row 1
            0b01100110, // Row 2
            0b11000011, // Row 3
            0b11000011, // Row 4
            0b11000011, // Row 5
            0b11000011, // Row 6
            0b01100110, // Row 7
            0b00111100  // Row 8
        },
        // Number 1
        {
            0b00011000, // Row 1
            0b00111000, // Row 2
            0b01111000, // Row 3
            0b00011000, // Row 4
            0b00011000, // Row 5
            0b00011000, // Row 6
            0b01111110, // Row 7
            0b01111110  // Row 8
        },
        // Number 2
        {
            0b01111110, // Row 1
            0b11000011, // Row 2
            0b00000011, // Row 3
            0b00001110, // Row 4
            0b00110000, // Row 5
            0b11000000, // Row 6
            0b11111111, // Row 7
            0b00000000  // Row 8
        },
        // Number 3
        {
            0b01111110, // Row 1
            0b11000011, // Row 2
            0b00000011, // Row 3
            0b00111110, // Row 4
            0b00000011, // Row 5
            0b11000011, // Row 6
            0b01111110, // Row 7
            0b00000000  // Row 8
        },
        // Number 4
        {
            0b00001110, // Row 1
            0b00011110, // Row 2
            0b00110110, // Row 3
            0b01100110, // Row 4
            0b11111111, // Row 5
            0b00000110, // Row 6
            0b00000110, // Row 7
            0b00000000  // Row 8
        },
        // Number 5
        {
            0b11111111, // Row 1
            0b11000000, // Row 2
            0b11111110, // Row 3
            0b00000011, // Row 4
            0b00000011, // Row 5
            0b11000011, // Row 6
            0b01111110, // Row 7
            0b00000000  // Row 8
        },
        // Number 6
        {
            0b00111110, // Row 1
            0b01100000, // Row 2
            0b11000000, // Row 3
            0b11111110, // Row 4
            0b11000011, // Row 5
            0b11000011, // Row 6
            0b01111110, // Row 7
            0b00000000  // Row 8
        },
        // Number 7
        {
            0b11111111, // Row 1
            0b11000011, // Row 2
            0b00000110, // Row 3
            0b00001100, // Row 4
            0b00011000, // Row 5
            0b00110000, // Row 6
            0b00110000, // Row 7
            0b00000000  // Row 8
        },
        // Number 8
        {
            0b01111110, // Row 1
            0b11000011, // Row 2
            0b11000011, // Row 3
            0b01111110, // Row 4
            0b11000011, // Row 5
            0b11000011, // Row 6
            0b01111110, // Row 7
            0b00000000  // Row 8
        },
        // Number 9
        {
            0b01111110, // Row 1
            0b11000011, // Row 2
            0b11000011, // Row 3
            0b01111111, // Row 4
            0b00000011, // Row 5
            0b00000110, // Row 6
            0b01111100, // Row 7
            0b00000000  // Row 8
        },
    };

    int main() {
        if (wiringPiSetup() == -1) {
            printf("Failed to initialize WiringPi\n");
            return 1;
        }

        if (wiringPiSPISetup(SPI_CHANNEL, SPI_SPEED) == -1) {
            printf("Failed to initialize SPI\n");
            return 1;
        }

        max7219_init();  // Initialize the MAX7219 module

        // Display patterns in a loop
        while (1) {
            // Display the square pattern
            display_pattern(patterns[0], 1000);  // Display for 1000 milliseconds

            // Display the heart pattern
            display_pattern(patterns[1], 1000);

            // Display numbers 0-9
            for (int i = 2; i <= 11; i++) {
                display_pattern(patterns[i], 1000);
            }
        }

        return 0;
    }

**ã‚³ãƒ¼ãƒ‰èª¬æ˜**


#. å¿…è¦ãªãƒ˜ãƒƒãƒ€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¤ãƒ³ã‚¯ãƒ«ãƒ¼ãƒ‰ï¼š

   * ``wiringPi.h``ï¼š WiringPi ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ã¦ GPIO ã‚’åˆ¶å¾¡ã™ã‚‹ãŸã‚ã®é–¢æ•°ã‚’æä¾›ã—ã¾ã™ã€‚
   * ``wiringPiSPI.h``ï¼š SPI é€šä¿¡ã‚’è¡Œã†ãŸã‚ã®é–¢æ•°ã‚’æä¾›ã—ã¾ã™ã€‚
   * ``stdio.h``ï¼š æ¨™æº–ã®å…¥å‡ºåŠ›é–¢æ•°ï¼ˆä¾‹ï¼š ``printf``  ãªã©ï¼‰ã‚’æä¾›ã—ã¾ã™ã€‚

#. å®šç¾©ï¼š

   * ``SPI_CHANNEL``ï¼š ä½¿ç”¨ã™ã‚‹ SPI ãƒãƒ£ãƒ³ãƒãƒ«ï¼ˆ0 ã¾ãŸã¯ 1ï¼‰ã‚’æŒ‡å®šã—ã¾ã™ã€‚
   * ``SPI_SPEED``ï¼š SPI é€šä¿¡é€Ÿåº¦ã‚’ 1 MHz ã«è¨­å®šã—ã¾ã™ã€‚

   .. code-block:: c

        #define SPI_CHANNEL    0           // Define SPI channel (0 or 1)
        #define SPI_SPEED      1000000     // SPI speed set to 1 MHz

#. é–¢æ•° ``max7219_write``ï¼š ``MAX7219`` ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒã®ç‰¹å®šã®ãƒ¬ã‚¸ã‚¹ã‚¿ã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã—ã¾ã™ã€‚

   * ``address``ï¼š æ›¸ãè¾¼ã¿å…ˆã®ãƒ¬ã‚¸ã‚¹ã‚¿ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
   * ``data``ï¼š ãƒ¬ã‚¸ã‚¹ã‚¿ã«æ›¸ãè¾¼ã‚€ãƒ‡ãƒ¼ã‚¿ã€‚
   * ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€ãƒãƒƒãƒ•ã‚¡ã‚’ä½œæˆã—ã¾ã™ã€‚
   * ``wiringPiSPIDataRW`` ã‚’ä½¿ç”¨ã—ã¦ã€ãƒãƒƒãƒ•ã‚¡ã‚’ SPI çµŒç”±ã§é€ä¿¡ã—ã¾ã™ã€‚

   .. code-block:: c

        void max7219_write(unsigned char address, unsigned char data) {
            unsigned char buffer[2];
            buffer[0] = address;   // Register address to write to
            buffer[1] = data;      // Data to write into the register
            wiringPiSPIDataRW(SPI_CHANNEL, buffer, 2);  // Send data via SPI
        }

#. é–¢æ•° ``max7219_init``ï¼š ``MAX7219`` ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å¿…è¦ãªè¨­å®šã§åˆæœŸåŒ–ã—ã¾ã™ã€‚

   * ãƒ‡ã‚³ãƒ¼ãƒ‰ãƒ¢ãƒ¼ãƒ‰ã‚’ã€Œãƒ‡ã‚³ãƒ¼ãƒ‰ãªã—ã€ã«è¨­å®šï¼ˆLED ã‚’ç›´æ¥åˆ¶å¾¡ã™ã‚‹ãŸã‚ï¼‰ã€‚
   * æ˜ã‚‹ã•ï¼ˆè¼åº¦ï¼‰ã‚’ä¸­ç¨‹åº¦ã®ãƒ¬ãƒ™ãƒ«ï¼ˆ0x03ï¼‰ã«è¨­å®šã€‚
   * ã‚¹ã‚­ãƒ£ãƒ³ãƒªãƒŸãƒƒãƒˆã‚’ 7 ã«è¨­å®šã—ã€ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã®ã™ã¹ã¦ã® 8 æ¡ï¼ˆè¡Œï¼‰ã‚’æœ‰åŠ¹ã«ã—ã¾ã™ã€‚
   * ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³ãƒ¢ãƒ¼ãƒ‰ã‚’çµ‚äº†ã—ã¦ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã‚’ã‚ªãƒ³ã«ã—ã¾ã™ã€‚
   * ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã‚’ç„¡åŠ¹åŒ–ã—ã¾ã™ã€‚
   * ã™ã¹ã¦ã®æ¡ã®ãƒ¬ã‚¸ã‚¹ã‚¿ã« 0x00 ã‚’æ›¸ãè¾¼ã‚€ã“ã¨ã§ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã™ã€‚

   .. code-block:: c

        void max7219_init() {
            max7219_write(0x09, 0x00); // Decode Mode: No decoding for digits (useful for 7-segment displays)
            max7219_write(0x0A, 0x03); // Intensity: Set brightness level (0x00 to 0x0F)
            max7219_write(0x0B, 0x07); // Scan Limit: Display digits 0-7 (all 8 digits)
            max7219_write(0x0C, 0x01); // Shutdown Register: Normal operation (not in shutdown mode)
            max7219_write(0x0F, 0x00); // Display Test: Normal operation (no test mode)

            // Clear all digits on the display
            for (int i = 1; i <= 8; i++) {
                max7219_write(i, 0x00); // Write 0 to each digit register
            }
        }

#. é–¢æ•° ``max7219_display``ï¼š æŒ‡å®šã—ãŸ 8 ãƒã‚¤ãƒˆã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã‚’æ›´æ–°ã—ã¾ã™ã€‚

   * ``data``ï¼š è¡¨ç¤ºã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å«ã‚€é…åˆ—ã€‚
   * å„ 8 è¡Œï¼ˆæ¡ï¼‰ã‚’ç¹°ã‚Šè¿”ã—ã¦å¯¾å¿œã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸ãè¾¼ã¿ã¾ã™ã€‚

   .. code-block:: c

        void max7219_display(unsigned char *data) {
            for (int i = 1; i <= 8; i++) {
                max7219_write(i, data[i - 1]); // Write each row of the pattern to the display
            }
        }

#. é–¢æ•° ``display_pattern``ï¼š æŒ‡å®šã—ãŸæ™‚é–“è¡¨ç¤ºã™ã‚‹ãŸã‚ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚

   * ``pattern``ï¼š è¡¨ç¤ºã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆ8 ãƒã‚¤ãƒˆã®é…åˆ—ï¼‰ã€‚
   * ``delay_ms``ï¼š ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹æ™‚é–“ã®é•·ã•ï¼ˆãƒŸãƒªç§’ï¼‰ã€‚
   * ``max7219_display`` ã‚’å‘¼ã³å‡ºã—ã¦ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚
   * æŒ‡å®šã•ã‚ŒãŸæ™‚é–“ã ã‘å¾…æ©Ÿã™ã‚‹ãŸã‚ã« ``delay`` ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

   .. code-block:: c

        void display_pattern(const unsigned char pattern[8], int delay_ms) {
            max7219_display((unsigned char *)pattern); // Display the pattern
            delay(delay_ms);                           // Wait for the specified time in milliseconds
        }

#. é…åˆ—ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼š

   * ã‚¹ã‚¯ã‚¨ã‚¢ã€ãƒãƒ¼ãƒˆã€ãŠã‚ˆã³æ•°å­— 0 - 9 ã®äº‹å‰å®šç¾©ã•ã‚ŒãŸãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å«ã‚€ã€‚
   * å„ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€8x8 LED ãƒãƒˆãƒªãƒƒã‚¯ã‚¹ã® 8 è¡Œã‚’è¡¨ã™ 8 ãƒã‚¤ãƒˆã®é…åˆ—ã€‚
   * å„ãƒã‚¤ãƒˆã¯ã€ãƒã‚¤ãƒŠãƒªè¡¨è¨˜ã‚’ä½¿ç”¨ã—ã€å„ãƒ“ãƒƒãƒˆãŒ LED ã‚’è¡¨ã—ã¾ã™ï¼ˆ1 ã¯ã‚ªãƒ³ã€0 ã¯ã‚ªãƒ•ï¼‰ã€‚
   
   .. code-block:: c

        const unsigned char patterns[][8] = {
            // Square pattern
            {
                0b11111111, // Row 1
                0b10000001, // Row 2
                0b10000001, // Row 3
                0b10000001, // Row 4
                0b10000001, // Row 5
                0b10000001, // Row 6
                0b10000001, // Row 7
                0b11111111  // Row 8
            },
            ...
            // Number 9
            {
                ...
            },
        };    


#. ãƒ¡ã‚¤ãƒ³é–¢æ•°ï¼š

   * ``WiringPi`` ãŠã‚ˆã³ ``SPI`` ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’åˆæœŸåŒ–ã—ã¾ã™ã€‚
   
     .. code-block:: c

        if (wiringPiSetup() == -1) {
            printf("Failed to initialize WiringPi\n");
            return 1;
        }

        if (wiringPiSPISetup(SPI_CHANNEL, SPI_SPEED) == -1) {
            printf("Failed to initialize SPI\n");
            return 1;
        }
   
   * ``max7219_init`` ã‚’å‘¼ã³å‡ºã—ã¦ ``MAX7219`` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¨­å®šã—ã¾ã™ã€‚
   
     .. code-block:: c

        max7219_init();  // Initialize the MAX7219 module
      
   * ç„¡é™ãƒ«ãƒ¼ãƒ—ã«å…¥ã‚Šã€ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç¶™ç¶šçš„ã«è¡¨ç¤ºã—ã¾ã™ã€‚å„ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ 1 ç§’é–“è¡¨ç¤ºã—ã¦ã‹ã‚‰æ¬¡ã«é€²ã¿ã¾ã™ã€‚

     .. code-block:: c

        while (1) {
            // Display the square pattern
            display_pattern(patterns[0], 1000);  // Display for 1000 milliseconds

            // Display the heart pattern
            display_pattern(patterns[1], 1000);

            // Display numbers 0-9
            for (int i = 2; i <= 11; i++) {
                display_pattern(patterns[i], 1000);
            }
        }

**ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç†è§£**

* ãƒã‚¤ãƒŠãƒªè¡¨è¨˜ï¼š

  * å„ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€ãƒã‚¤ãƒŠãƒªãƒªãƒ†ãƒ©ãƒ«ï¼ˆ ``0b`` ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ï¼‰ã‚’ä½¿ç”¨ã—ã¦å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚
  * å„ãƒã‚¤ãƒˆã¯ã€8x8 LED ãƒãƒˆãƒªãƒƒã‚¯ã‚¹ä¸Šã® 1 è¡Œã«å¯¾å¿œã—ã¾ã™ã€‚
  * å„ãƒã‚¤ãƒˆå†…ã®å„ãƒ“ãƒƒãƒˆãŒãã®è¡Œå†…ã®åˆ—ï¼ˆLEDï¼‰ã‚’è¡¨ã—ã¾ã™ã€‚
  * æœ€ä¸Šä½ãƒ“ãƒƒãƒˆï¼ˆå·¦ç«¯ï¼‰ã¯ã€å·¦ç«¯ã®æœ€åˆã® LED ã«å¯¾å¿œã—ã¾ã™ã€‚

* ã‚«ã‚¹ã‚¿ãƒ ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ä½œæˆï¼š

  * 8 ãƒã‚¤ãƒˆã®æ–°ã—ã„é…åˆ—ã‚’å®šç¾©ã—ã¦ã€æ–°ã—ã„ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½œæˆã§ãã¾ã™ã€‚
  * å„ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ ``patterns`` é…åˆ—ã«è¿½åŠ ã§ãã¾ã™ã€‚
  * ãƒ¡ã‚¤ãƒ³é–¢æ•°ã®ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ãƒ«ãƒ¼ãƒ—ã‚’æ›´æ–°ã—ã¦ã€æ–°ã—ã„ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å«ã‚ã¾ã™ã€‚

**èª¿æ•´ã¨ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º**

* æ˜ã‚‹ã•ã®å¤‰æ›´ï¼š ``max7219_init`` ã§è¼åº¦ãƒ¬ãƒ™ãƒ«ã‚’å¤‰æ›´ã—ã¾ã™ï¼š

  .. code-block:: c

        max7219_write(0x0A, brightness_level); // brightness_level between 0x00 and 0x0F

* è¡¨ç¤ºæ™‚é–“ã®å¤‰æ›´ï¼š ``display_pattern`` å‘¼ã³å‡ºã—ã§ ``delay_ms`` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å¤‰æ›´ã—ã¦ã€å„ãƒ‘ã‚¿ãƒ¼ãƒ³ã®è¡¨ç¤ºæ™‚é–“ã‚’èª¿æ•´ã—ã¾ã™ã€‚


ç¾è±¡ã®ç”»åƒ
-----------------------

.. image:: ../img/1.1.6led_dot_matrix.JPG
