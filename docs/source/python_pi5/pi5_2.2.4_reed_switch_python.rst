.. note::

    ã“ã‚“ã«ã¡ã¯ã€SunFounderã®Raspberry Pi & Arduino & ESP32æ„›å¥½å®¶ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã¸ã‚ˆã†ã“ãï¼Facebookä¸Šã§Raspberry Piã€Arduinoã€ESP32ã«ã¤ã„ã¦ã‚‚ã£ã¨æ·±ãæ˜ã‚Šä¸‹ã’ã€ä»–ã®æ„›å¥½å®¶ã¨äº¤æµã—ã¾ã—ã‚‡ã†ã€‚

    **å‚åŠ ã™ã‚‹ç†ç”±ã¯ï¼Ÿ**

    - **ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã‚µãƒãƒ¼ãƒˆ**ï¼šã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚„ãƒãƒ¼ãƒ ã®åŠ©ã‘ã‚’å€Ÿã‚Šã¦ã€è²©å£²å¾Œã®å•é¡Œã‚„æŠ€è¡“çš„ãªèª²é¡Œã‚’è§£æ±ºã—ã¾ã™ã€‚
    - **å­¦ã³ï¼†å…±æœ‰**ï¼šãƒ’ãƒ³ãƒˆã‚„ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’äº¤æ›ã—ã¦ã‚¹ã‚­ãƒ«ã‚’å‘ä¸Šã•ã›ã¾ã—ã‚‡ã†ã€‚
    - **ç‹¬å çš„ãªãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**ï¼šæ–°è£½å“ã®ç™ºè¡¨ã‚„å…ˆè¡Œãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«æ—©æœŸã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã—ã‚‡ã†ã€‚
    - **ç‰¹åˆ¥å‰²å¼•**ï¼šæœ€æ–°è£½å“ã®ç‹¬å å‰²å¼•ã‚’ãŠæ¥½ã—ã¿ãã ã•ã„ã€‚
    - **ç¥­ã‚Šã®ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‚®ãƒ•ãƒˆ**ï¼šã‚®ãƒ•ãƒˆã‚„ç¥æ—¥ã®ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã«å‚åŠ ã—ã¾ã—ã‚‡ã†ã€‚

    ğŸ‘‰ ç§ãŸã¡ã¨ä¸€ç·’ã«æ¢ç´¢ã—ã€å‰µé€ ã™ã‚‹æº–å‚™ã¯ã§ãã¦ã„ã¾ã™ã‹ï¼Ÿ[|link_sf_facebook|]ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä»Šã™ãå‚åŠ ã—ã¾ã—ã‚‡ã†ï¼

.. _2.2.4_py_pi5:

2.2.4 ãƒªãƒ¼ãƒ‰ã‚¹ã‚¤ãƒƒãƒãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
=====================================

ã¯ã˜ã‚ã«
-------------------

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ç£å ´ã‚’é©ç”¨ã™ã‚‹ã“ã¨ã§å‹•ä½œã™ã‚‹é›»æ°—ã‚¹ã‚¤ãƒƒãƒã§ã‚ã‚‹ãƒªãƒ¼ãƒ‰ã‚¹ã‚¤ãƒƒãƒã«ã¤ã„ã¦å­¦ã³ã¾ã™ã€‚

å¿…è¦ãªéƒ¨å“
------------------------------

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ã€æ¬¡ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå¿…è¦ã§ã™ã€‚ 

.. image:: ../python_pi5/img/2.2.4_reed_switch_list.png
    :width: 700
    :align: center

ä¸€å¼ã‚’è³¼å…¥ã™ã‚‹ã®ãŒä¾¿åˆ©ã§ã™ã€ã“ã¡ã‚‰ãŒãƒªãƒ³ã‚¯ã§ã™ï¼š 

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - åå‰	
        - ã“ã®ã‚­ãƒƒãƒˆã®ã‚¢ã‚¤ãƒ†ãƒ 
        - ãƒªãƒ³ã‚¯
    *   - Raphael Kit
        - 337
        - |link_Raphael_kit|

ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯ã‹ã‚‰åˆ¥ã€…ã«è³¼å…¥ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

.. list-table::
    :widths: 30 20
    :header-rows: 1

    *   - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ç´¹ä»‹
        - è³¼å…¥ãƒªãƒ³ã‚¯

    *   - :ref:`cpn_gpio_board`
        - |link_gpio_board_buy|
    *   - :ref:`cpn_breadboard`
        - |link_breadboard_buy|
    *   - :ref:`cpn_wires`
        - |link_wires_buy|
    *   - :ref:`cpn_resistor`
        - |link_resistor_buy|
    *   - :ref:`cpn_led`
        - |link_led_buy|
    *   - :ref:`cpn_reed_switch`
        - |link_reed_switch_buy|

å›è·¯å›³
-----------------------

============ ======== ======== ===
T-Board Name physical wiringPi BCM
GPIO17       Pin 11   0        17
GPIO27       Pin 13   2        27
GPIO22       Pin 15   3        22
============ ======== ======== ===

.. image:: ../python_pi5/img/2.2.4_reed_switch_schematic_1.png
    :width: 400
    :align: center

.. image:: ../python_pi5/img/2.2.4_reed_switch_schematic_2.png
    :width: 400
    :align: center

å®Ÿé¨“æ‰‹é †
-------------------------------

**ã‚¹ãƒ†ãƒƒãƒ— 1:** å›è·¯ã‚’çµ„ã¿ç«‹ã¦ã‚‹ã€‚

.. image:: ../python_pi5/img/2.2.4_reed_switch_circuit.png
    :width: 700
    :align: center

**ã‚¹ãƒ†ãƒƒãƒ— 2:** ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å¤‰æ›´ã™ã‚‹ã€‚

.. raw:: html

   <run></run>

.. code-block::

    cd ~/raphael-kit/python-pi5

**ã‚¹ãƒ†ãƒƒãƒ— 3:** å®Ÿè¡Œã™ã‚‹ã€‚

.. raw:: html

   <run></run>

.. code-block::

    sudo python3 2.2.4_ReedSwitch_zero.py

ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ç·‘è‰²ã®LEDãŒç‚¹ç¯ã—ã¾ã™ã€‚ãƒªãƒ¼ãƒ‰ã‚¹ã‚¤ãƒƒãƒãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ç£çŸ³ã‚’è¿‘ã¥ã‘ã‚‹ã¨ã€èµ¤è‰²ã®LEDãŒç‚¹ç¯ã—ã€ç£çŸ³ã‚’é›¢ã™ã¨å†ã³ç·‘è‰²ã®LEDãŒç‚¹ç¯ã—ã¾ã™ã€‚

**ã‚³ãƒ¼ãƒ‰**

.. note::

    ä¸‹è¨˜ã®ã‚³ãƒ¼ãƒ‰ã‚’ **å¤‰æ›´/ãƒªã‚»ãƒƒãƒˆ/ã‚³ãƒ”ãƒ¼/å®Ÿè¡Œ/åœæ­¢** ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã—ã‹ã—ã€ãã®å‰ã« ``raphael-kit/python-pi5`` ã®ã‚ˆã†ãªã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ãƒ‘ã‚¹ã«ç§»å‹•ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã—ãŸå¾Œã€ç›´æ¥å®Ÿè¡Œã—ã¦åŠ¹æœã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚


.. raw:: html

    <run></run>

.. code-block:: python

   #!/usr/bin/env python3
   from gpiozero import LED, Button

   # Initialize the reed switch and LEDs using GPIO Zero
   reed_switch = Button(17, pull_up=True)  # Reed switch on GPIO 17, using an internal pull-up resistor
   green_led = LED(27)                     # Green LED connected to GPIO pin 27
   red_led = LED(22)                       # Red LED connected to GPIO pin 22

   def update_leds():
       """
       Update the state of the LEDs based on the reed switch.
       Turns the red LED on and green LED off when the reed switch is pressed, and vice versa.
       """
       if reed_switch.is_pressed:
           green_led.off()          # Turn off the green LED
           red_led.on()             # Turn on the red LED
       else:
           green_led.on()           # Turn on the green LED
           red_led.off()            # Turn off the red LED

   try:
       green_led.on()               # Turn on the green LED at the start
       while True:
           # Set the callback functions for reed switch state changes
           reed_switch.when_pressed = update_leds   # Callback when the switch is pressed
           reed_switch.when_released = update_leds  # Callback when the switch is released

   except KeyboardInterrupt:
       # Clean up resources and exit on Ctrl+C
       green_led.off()
       red_led.off()
       pass


**ã‚³ãƒ¼ãƒ‰èª¬æ˜**

#. ã“ã®è¡Œã¯ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒPython 3ã‚’ä½¿ç”¨ã—ã¦å®Ÿè¡Œã•ã‚Œã‚‹ã“ã¨ã‚’æŒ‡å®šã—ã¾ã™ã€‚gpiozeroãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‹ã‚‰ ``LED`` ã¨ ``Button`` ï¼ˆãƒªãƒ¼ãƒ‰ã‚¹ã‚¤ãƒƒãƒç”¨ï¼‰ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚

   .. code-block:: python

       #!/usr/bin/env python3
       from gpiozero import LED, Button

#. GPIOãƒ”ãƒ³17ã«å†…éƒ¨ãƒ—ãƒ«ã‚¢ãƒƒãƒ—æŠµæŠ—ã‚’ä½¿ç”¨ã—ã¦ãƒªãƒ¼ãƒ‰ã‚¹ã‚¤ãƒƒãƒã‚’ã€GPIOãƒ”ãƒ³27ã¨22ã«äºŒã¤ã®LEDã‚’åˆæœŸåŒ–ã—ã¾ã™ã€‚

   .. code-block:: python
       
       # Initialize the reed switch and LEDs using GPIO Zero
       reed_switch = Button(17, pull_up=True)  # Reed switch on GPIO 17, using an internal pull-up resistor
       green_led = LED(27)                     # Green LED connected to GPIO pin 27
       red_led = LED(22)                       # Red LED connected to GPIO pin 22

#. ãƒªãƒ¼ãƒ‰ã‚¹ã‚¤ãƒƒãƒã®çŠ¶æ…‹ã«åŸºã¥ã„ã¦LEDã®çŠ¶æ…‹ã‚’æ›´æ–°ã™ã‚‹ ``update_leds`` é–¢æ•°ã‚’å®šç¾©ã—ã¾ã™ã€‚ã‚¹ã‚¤ãƒƒãƒãŒæŠ¼ã•ã‚ŒãŸæ™‚ã¯èµ¤è‰²LEDã‚’ç‚¹ç¯ã—ç·‘è‰²LEDã‚’æ¶ˆç¯ã—ã€ãã®é€†ã®çŠ¶æ…‹ã§é€†ã«ã—ã¾ã™ã€‚

   .. code-block:: python

       def update_leds():
           if reed_switch.is_pressed:
               green_led.off()          # Turn off the green LED
               red_led.on()             # Turn on the red LED
           else:
               green_led.on()           # Turn on the green LED
               red_led.off()            # Turn off the red LED

#. é–‹å§‹æ™‚ã«ç·‘è‰²LEDã‚’ç‚¹ç¯çŠ¶æ…‹ã«ã—ã¾ã™ã€‚ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ—ã§ã¯ãƒªãƒ¼ãƒ‰ã‚¹ã‚¤ãƒƒãƒã® ``when_pressed`` ãŠã‚ˆã³ ``when_released`` ã‚¤ãƒ™ãƒ³ãƒˆã« ``update_leds`` é–¢æ•°ã‚’ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã¨ã—ã¦å‰²ã‚Šå½“ã¦ã¾ã™ã€‚KeyboardInterruptã®ä¾‹å¤–å‡¦ç†ã‚’å«ã¿ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å„ªé›…ã«çµ‚äº†ã•ã›ã¾ã™ã€‚

   .. code-block:: python

       try:
           green_led.on()               # Turn on the green LED at the start
           while True:
               # Set the callback functions for reed switch state changes
               reed_switch.when_pressed = update_leds   # Callback when the switch is pressed
               reed_switch.when_released = update_leds  # Callback when the switch is released

       except KeyboardInterrupt:
           # Clean up resources and exit on Ctrl+C
           green_led.off()
           red_led.off()
           pass