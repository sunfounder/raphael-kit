.. note::

    ã“ã‚“ã«ã¡ã¯ã€SunFounderã®Raspberry Pi & Arduino & ESP32æ„›å¥½å®¶ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã¸ã‚ˆã†ã“ãï¼Facebookä¸Šã§Raspberry Piã€Arduinoã€ESP32ã«ã¤ã„ã¦ã‚‚ã£ã¨æ·±ãæ˜ã‚Šä¸‹ã’ã€ä»–ã®æ„›å¥½å®¶ã¨äº¤æµã—ã¾ã—ã‚‡ã†ã€‚

    **å‚åŠ ã™ã‚‹ç†ç”±ã¯ï¼Ÿ**

    - **ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã‚µãƒãƒ¼ãƒˆ**ï¼šã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚„ãƒãƒ¼ãƒ ã®åŠ©ã‘ã‚’å€Ÿã‚Šã¦ã€è²©å£²å¾Œã®å•é¡Œã‚„æŠ€è¡“çš„ãªèª²é¡Œã‚’è§£æ±ºã—ã¾ã™ã€‚
    - **å­¦ã³ï¼†å…±æœ‰**ï¼šãƒ’ãƒ³ãƒˆã‚„ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’äº¤æ›ã—ã¦ã‚¹ã‚­ãƒ«ã‚’å‘ä¸Šã•ã›ã¾ã—ã‚‡ã†ã€‚
    - **ç‹¬å çš„ãªãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**ï¼šæ–°è£½å“ã®ç™ºè¡¨ã‚„å…ˆè¡Œãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«æ—©æœŸã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã—ã‚‡ã†ã€‚
    - **ç‰¹åˆ¥å‰²å¼•**ï¼šæœ€æ–°è£½å“ã®ç‹¬å å‰²å¼•ã‚’ãŠæ¥½ã—ã¿ãã ã•ã„ã€‚
    - **ç¥­ã‚Šã®ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‚®ãƒ•ãƒˆ**ï¼šã‚®ãƒ•ãƒˆã‚„ç¥æ—¥ã®ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã«å‚åŠ ã—ã¾ã—ã‚‡ã†ã€‚

    ğŸ‘‰ ç§ãŸã¡ã¨ä¸€ç·’ã«æ¢ç´¢ã—ã€å‰µé€ ã™ã‚‹æº–å‚™ã¯ã§ãã¦ã„ã¾ã™ã‹ï¼Ÿ[|link_sf_facebook|]ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä»Šã™ãå‚åŠ ã—ã¾ã—ã‚‡ã†ï¼

.. _4.1.16_py_pi5:

4.1.13 ãƒ¢ãƒ¼ãƒ«ã‚¹ä¿¡å·ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿
=================================

ã¯ã˜ã‚ã«
-----------------

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€Raspberry Piã«è‹±å­—ã®ã‚·ãƒªãƒ¼ã‚ºã‚’å…¥åŠ›ã—ã€ãã‚Œã‚’ãƒ¢ãƒ¼ãƒ«ã‚¹ä¿¡å·ã¨ã—ã¦è¡¨ç¤ºã™ã‚‹ãƒ¢ãƒ¼ãƒ«ã‚¹ä¿¡å·ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã‚’ä½œæˆã—ã¾ã™ã€‚

å¿…è¦ãªéƒ¨å“
------------------------------

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ã€æ¬¡ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå¿…è¦ã§ã™ã€‚

.. image:: ../python_pi5/img/4.1.16_morse_code_generator_list.png
    :width: 800
    :align: center

ä¸€å¼ã‚’è³¼å…¥ã™ã‚‹ã®ãŒä¾¿åˆ©ã§ã™ã€ã“ã¡ã‚‰ãŒãƒªãƒ³ã‚¯ã§ã™ï¼š 

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - åå‰	
        - ã“ã®ã‚­ãƒƒãƒˆã®ã‚¢ã‚¤ãƒ†ãƒ 
        - ãƒªãƒ³ã‚¯
    *   - Raphael Kit
        - 337
        - |link_Raphael_kit|

ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯ã‹ã‚‰åˆ¥ã€…ã«è³¼å…¥ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

.. list-table::
    :widths: 30 20
    :header-rows: 1

    *   - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ç´¹ä»‹
        - è³¼å…¥ãƒªãƒ³ã‚¯

    *   - :ref:`cpn_gpio_board`
        - |link_gpio_board_buy|
    *   - :ref:`cpn_breadboard`
        - |link_breadboard_buy|
    *   - :ref:`cpn_wires`
        - |link_wires_buy|
    *   - :ref:`cpn_resistor`
        - |link_resistor_buy|
    *   - :ref:`cpn_led`
        - |link_led_buy|
    *   - :ref:`cpn_buzzer`
        - \-
    *   - :ref:`cpn_transistor`
        - |link_transistor_buy|

å›è·¯å›³
-----------------------

============ ======== ======== ===
T-Board Name physical wiringPi BCM
GPIO17       Pin 11   0        17
GPIO22       Pin 15   3        22
============ ======== ======== ===

.. image:: ../python_pi5/img/4.1.16_morse_code_generator_schematic.png
   :align: center



å®Ÿé¨“æ‰‹é †
----------------------------

**ã‚¹ãƒ†ãƒƒãƒ—1ï¼š** å›è·¯ã‚’çµ„ã¿ç«‹ã¦ã¾ã™ã€‚ï¼ˆãƒ–ã‚¶ãƒ¼ã®æ¥µæ€§ã«æ³¨æ„ã—ã¦ãã ã•ã„ï¼š+ãƒ©ãƒ™ãƒ«ã®ã‚ã‚‹æ–¹ãŒæ­£æ¥µã§ã€ã‚‚ã†ä¸€æ–¹ãŒè² æ¥µã§ã™ã€‚ï¼‰

.. image:: ../python_pi5/img/4.1.16_morse_code_generator_circuit.png

**ã‚¹ãƒ†ãƒƒãƒ—2ï¼š** ã‚³ãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã¾ã™ã€‚

.. raw:: html

   <run></run>

.. code-block::

    cd ~/raphael-kit/python-pi5

**ã‚¹ãƒ†ãƒƒãƒ—3ï¼š** å®Ÿè¡Œã—ã¾ã™ã€‚

.. raw:: html

   <run></run>

.. code-block::

    sudo python3 3.1.11_MorseCodeGenerator_zero.py

ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒå®Ÿè¡Œã•ã‚ŒãŸã‚‰ã€ä¸€é€£ã®æ–‡å­—åˆ—ã‚’å…¥åŠ›ã—ã€ãƒ–ã‚¶ãƒ¼ã¨LEDãŒå¯¾å¿œã™ã‚‹ãƒ¢ãƒ¼ãƒ«ã‚¹ä¿¡å·ã‚’é€ä¿¡ã—ã¾ã™ã€‚

.. warning::

    ã‚¨ãƒ©ãƒ¼ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ ``RuntimeError: Cannot determine SOC peripheral base address`` ãŒè¡¨ç¤ºã•ã‚ŒãŸå ´åˆã¯ã€ :ref:`faq_soc` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

**ã‚³ãƒ¼ãƒ‰**

.. code-block:: python

   #!/usr/bin/env python3
   from gpiozero import Buzzer, LED
   import time

   # Initialize Buzzer and LED to GPIO pins
   BeepPin = Buzzer(22)
   ALedPin = LED(17)

   # Morse code representation for characters
   MORSECODE = {
       'A': '01', 'B': '1000', 'C': '1010', 'D': '100', 'E': '0', 'F': '0010', 'G': '110',
       'H': '0000', 'I': '00', 'J': '0111', 'K': '101', 'L': '0100', 'M': '11', 'N': '10',
       'O': '111', 'P': '0110', 'Q': '1101', 'R': '010', 'S': '000', 'T': '1',
       'U': '001', 'V': '0001', 'W': '011', 'X': '1001', 'Y': '1011', 'Z': '1100',
       '1': '01111', '2': '00111', '3': '00011', '4': '00001', '5': '00000',
       '6': '10000', '7': '11000', '8': '11100', '9': '11110', '0': '11111',
       '?': '001100', '/': '10010', ',': '110011', '.': '010101', ';': '101010',
       '!': '101011', '@': '011010', ':': '111000',
   }

   def on():
       """ Turn on the buzzer and LED. """
       BeepPin.on()
       ALedPin.on()

   def off():
       """ Turn off the buzzer and LED. """
       BeepPin.off()
       ALedPin.off()

   def beep(dt):  # dt for delay time.
       """
       Produce a beep sound and LED flash for the specified duration.
       :param dt: Duration for the beep and flash.
       """
       on()
       time.sleep(dt)
       off()
       time.sleep(dt)

   def morsecode(code):
       """
       Convert the input code into Morse code and signal it using the buzzer and LED.
       :param code: The text to be converted to Morse code.
       """
       pause = 0.25
       for letter in code:
           for tap in MORSECODE[letter]:
               if tap == '0':
                   beep(pause / 2)  # Short beep for dot
               if tap == '1':
                   beep(pause)      # Long beep for dash
           time.sleep(pause)  # Pause between letters

   def destroy():
       """ Clean up resources on script termination. """
       print("")
       BeepPin.off()
       ALedPin.off()

   try:
       while True:
           code = input("Please input the messenger:")
           code = code.upper()  # Convert to uppercase for Morse code lookup
           print(code)
           morsecode(code)
   except KeyboardInterrupt:
       destroy()

**ã‚³ãƒ¼ãƒ‰ã®èª¬æ˜**

#. ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€gpiozeroãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‹ã‚‰BuzzerãŠã‚ˆã³LEDã‚¯ãƒ©ã‚¹ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã®ã‚¯ãƒ©ã‚¹ã¯ã€Raspberry Piä¸Šã®å¯¾å¿œã™ã‚‹GPIOãƒ‡ãƒã‚¤ã‚¹ã‚’åˆ¶å¾¡ã™ã‚‹ãŸã‚ã«å¿…è¦ã§ã™ã€‚

   .. code-block:: python

       #!/usr/bin/env python3
       from gpiozero import Buzzer, LED
       import time

#. GPIOãƒ”ãƒ³22ã®ãƒ–ã‚¶ãƒ¼ã¨GPIOãƒ”ãƒ³17ã®LEDã‚’åˆæœŸåŒ–ã—ã¦ã€ã“ã‚Œã‚‰ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’åˆ¶å¾¡ã™ã‚‹ã®ã«å½¹ç«‹ã¦ã¾ã™ã€‚

   .. code-block:: python

       # Initialize Buzzer and LED to GPIO pins
       BeepPin = Buzzer(22)
       ALedPin = LED(17)

#. ``MORSECODE`` æ§‹é€ ã‚’å®šç¾©ã—ã¾ã™ã€‚ã“ã‚Œã¯ã€Aã‹ã‚‰Zã¾ã§ã®æ–‡å­—ã€0ã‹ã‚‰9ã¾ã§ã®æ•°å­—ã€ãŠã‚ˆã³ã€Œ?ã€ã€ã€Œ/ã€ã€ã€Œ:ã€ã€ã€Œ,ã€ã€ã€Œ.ã€ã€ã€Œ;ã€ã€ã€Œ!ã€ã€ã€Œ@ã€ãªã©ã®è¨˜å·ã®ãƒ¢ãƒ¼ãƒ«ã‚¹ä¿¡å·è¡¨ç¾ã‚’å«ã‚€è¾æ›¸ã§ã™ã€‚ã“ã“ã§ã€ ``0`` ã¯ãƒ‰ãƒƒãƒˆã‚’ç¤ºã—ã€ ``1`` ã¯ãƒ€ãƒƒã‚·ãƒ¥ã‚’ç¤ºã—ã¾ã™ã€‚

   .. code-block:: python

       # Morse code representation for characters
       MORSECODE = {
           'A': '01', 'B': '1000', 'C': '1010', 'D': '100', 'E': '0', 'F': '0010', 'G': '110',
           'H': '0000', 'I': '00', 'J': '0111', 'K': '101', 'L': '0100', 'M': '11', 'N': '10',
           'O': '111', 'P': '0110', 'Q': '1101', 'R': '010', 'S': '000', 'T': '1',
           'U': '001', 'V': '0001', 'W': '011', 'X': '1001', 'Y': '1011', 'Z': '1100',
           '1': '01111', '2': '00111', '3': '00011', '4': '00001', '5': '00000',
           '6': '10000', '7': '11000', '8': '11100', '9': '11110', '0': '11111',
           '?': '001100', '/': '10010', ',': '110011', '.': '010101', ';': '101010',
           '!': '101011', '@': '011010', ':': '111000',
       }

#. ``on()`` é–¢æ•°ã¯ãƒ–ã‚¶ãƒ¼ã¨LEDã‚’ã‚ªãƒ³ã«ã—ã¾ã™ã€‚ ``off()`` é–¢æ•°ã¯ãƒ–ã‚¶ãƒ¼ã¨LEDã‚’ã‚ªãƒ•ã«ã—ã¾ã™ã€‚

   .. code-block:: python

       def on():
           """ Turn on the buzzer and LED. """
           BeepPin.on()
           ALedPin.on()

       def off():
           """ Turn off the buzzer and LED. """
           BeepPin.off()
           ALedPin.off()

#. ``beep()`` é–¢æ•°ã¯ã€ãƒ–ã‚¶ãƒ¼ã¨LEDã‚’æŒ‡å®šã•ã‚ŒãŸæ™‚é–“é–“éš”ã§éŸ³ã‚’é³´ã‚‰ã—ã€ç‚¹æ»…ã•ã›ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

   .. code-block:: python

       def beep(dt):  # dt for delay time.
           """
           Produce a beep sound and LED flash for the specified duration.
           :param dt: Duration for the beep and flash.
           """
           on()
           time.sleep(dt)
           off()
           time.sleep(dt)


#. ``morsecode()`` é–¢æ•°ã¯ã€å…¥åŠ›ã•ã‚ŒãŸæ–‡å­—ã®ãƒ¢ãƒ¼ãƒ«ã‚¹ä¿¡å·ã‚’å‡¦ç†ã—ã€ãƒ–ã‚¶ãƒ¼ã¨LEDã‚’ä½¿ç”¨ã—ã¦ãã‚Œã‚’ç¤ºã—ã¾ã™ã€‚

   .. code-block:: python

       def morsecode(code):
           """
           Convert the input code into Morse code and signal it using the buzzer and LED.
           :param code: The text to be converted to Morse code.
           """
           pause = 0.25
           for letter in code:
               for tap in MORSECODE[letter]:
                   if tap == '0':
                       beep(pause / 2)  # Short beep for dot
                   if tap == '1':
                       beep(pause)      # Long beep for dash
               time.sleep(pause)  # Pause between letters

#. ``destroy()`` é–¢æ•°ã¯ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒçµ‚äº†ã—ãŸã¨ãã«ãƒ–ã‚¶ãƒ¼ã¨LEDã®ä¸¡æ–¹ã‚’ã‚ªãƒ•ã«ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€GPIOãƒ”ãƒ³ãŒã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªçŠ¶æ…‹ã«ãªã‚‰ãªã„ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

   .. code-block:: python

       def destroy():
           """ Clean up resources on script termination. """
           print("")
           BeepPin.off()
           ALedPin.off()

#. ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã§é–¢é€£ã™ã‚‹æ–‡å­—ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€ ``upper()`` ãŒå…¥åŠ›æ–‡å­—ã‚’å¤§æ–‡å­—ã«å¤‰æ›ã—ã¾ã™ã€‚ ``printf()`` ã¯ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ç”»é¢ã«ã‚¯ãƒªã‚¢ãƒ†ã‚­ã‚¹ãƒˆã‚’è¡¨ç¤ºã—ã€ ``morsecode()`` é–¢æ•°ã¯ãƒ–ã‚¶ãƒ¼ã¨LEDã«ãƒ¢ãƒ¼ãƒ«ã‚¹ä¿¡å·ã‚’å‡ºåŠ›ã•ã›ã¾ã™ã€‚

   .. code-block:: python

       try:
           while True:
               code = input("Please input the messenger:")
               code = code.upper()  # Convert to uppercase for Morse code lookup
               print(code)
               morsecode(code)
       except KeyboardInterrupt:
           destroy()
