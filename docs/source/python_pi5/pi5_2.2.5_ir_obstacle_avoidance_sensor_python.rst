.. note::

    춰Hola, bienvenido a la Comunidad de Entusiastas de SunFounder Raspberry Pi & Arduino & ESP32 en Facebook! Sum칠rgete m치s en Raspberry Pi, Arduino y ESP32 con otros entusiastas.

    **쯇or qu칠 unirse?**

    - **Soporte experto**: Resuelve problemas postventa y desaf칤os t칠cnicos con la ayuda de nuestra comunidad y equipo.
    - **Aprender y compartir**: Intercambia consejos y tutoriales para mejorar tus habilidades.
    - **Preestrenos exclusivos**: Obt칠n acceso anticipado a nuevos anuncios de productos y adelantos.
    - **Descuentos especiales**: Disfruta de descuentos exclusivos en nuestros productos m치s nuevos.
    - **Promociones festivas y sorteos**: Participa en sorteos y promociones navide침as.

    游녤 쯃isto para explorar y crear con nosotros? Haz clic en [|link_sf_facebook|] y 칰nete hoy mismo.

.. _2.2.5_py_pi5:

2.2.5 Sensor de Evitaci칩n de Obst치culos por IR
==================================================

Introducci칩n
----------------

En este proyecto, aprenderemos sobre el m칩dulo de evitaci칩n de obst치culos por IR, que es un m칩dulo sensor que se puede utilizar para detectar obst치culos a distancias cortas, con poca interferencia, f치cil de ensamblar, f치cil de usar, etc. Puede ser ampliamente utilizado en la evitaci칩n de obst치culos de robots, carros de evitaci칩n de obst치culos, conteo en l칤neas de ensamblaje, etc.

Componentes necesarios
-----------------------------

En este proyecto, necesitamos los siguientes componentes.

.. image:: ../python_pi5/img/2.2.5_ir_obstacle_list.png
   :width: 700
   :align: center

Es definitivamente conveniente comprar un kit completo, aqu칤 est치 el enlace:

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - Nombre
        - COMPONENTES EN ESTE KIT
        - ENLACE
    *   - Kit Raphael
        - 337
        - |link_Raphael_kit|

Tambi칠n puedes comprarlos por separado en los enlaces a continuaci칩n.

.. list-table::
    :widths: 30 20
    :header-rows: 1

    *   - INTRODUCCI칍N DE COMPONENTES
        - ENLACE DE COMPRA

    *   - :ref:`cpn_gpio_extension_board`
        - |link_gpio_board_buy|
    *   - :ref:`cpn_breadboard`
        - |link_breadboard_buy|
    *   - :ref:`cpn_wires`
        - |link_wires_buy|
    *   - :ref:`cpn_avoid_module`
        - |link_obstacle_avoidance_buy|

Diagrama Esquem치tico
------------------------

.. image:: ../python_pi5/img/2.2.5_ir_obstacle_list_schematic.png
   :width: 500
   :align: center

Procedimientos Experimentales
---------------------------------

**Paso 1:** Construye el circuito

.. image:: ../python_pi5/img/2.2.5_ir_obstacle_circuit.png
   :width: 700
   :align: center

**Paso 2:** Cambia de directorio.

.. raw:: html

   <run></run>

.. code-block::

   cd ~/raphael-kit/python-pi5

**Paso 3:** Ejecuta.

.. raw:: html

   <run></run>

.. code-block::

   sudo python3 2.2.5_IrObstacle_zero.py

Despu칠s de ejecutar el c칩digo, cuando pongas tu mano frente a la sonda del m칩dulo, 
el indicador de salida en el m칩dulo se encender치 y se imprimir치 repetidamente en la 
pantalla "춰Barrera detectada!" hasta que retires tu mano.

**C칩digo**

.. nota::

   Puedes **Modificar/Restablecer/Copiar/Ejecutar/Detener** el c칩digo a continuaci칩n. Pero antes, debes ir a la ruta del c칩digo fuente como ``raphael-kit/python-pi5``. Despu칠s de modificar el c칩digo, puedes ejecutarlo directamente para ver el efecto.


.. raw:: html

    <run></run>

.. code-block:: python

   #!/usr/bin/env python3
   from gpiozero import Button
   import time

   # Inicializar el sensor de obst치culos conectado al pin GPIO 17
   # El sensor est치 configurado con una resistencia pull-up
   obstacle_sensor = Button(17, pull_up=True)  

   try:
      # Monitorear continuamente los obst치culos
      while True:
         if obstacle_sensor.is_pressed:  # Check if the sensor is triggered
               print("Detected Barrier!")  # Print a message when an obstacle is detected
               time.sleep(1)  # Delay for 1 second to avoid repetitive messages

   except KeyboardInterrupt:
      # Manejar KeyboardInterrupt (Ctrl+C) para una salida limpia y segura
      pass


**Explicaci칩n del C칩digo**

#. Esta l칤nea configura el script para ejecutarse utilizando Python 3. Importa la clase ``Button`` de gpiozero (utilizada para el sensor de obst치culos) y el m칩dulo ``time`` para retrasos.

   .. code-block:: python

      #!/usr/bin/env python3
      from gpiozero import Button
      import time

#. Inicializa un sensor de obst치culos conectado al pin GPIO 17 con una resistencia pull-up interna.

   .. code-block:: python

      # Inicializar el sensor de obst치culos conectado al pin GPIO 17
      # El sensor est치 configurado con una resistencia pull-up
      obstacle_sensor = Button(17, pull_up=True)  

#. En un bucle continuo, el programa verifica si el sensor de obst치culos est치 activado (``is_pressed``). Si se detecta un obst치culo, imprime "춰Obst치culo detectado!" y luego espera un segundo (para evitar mensajes repetitivos). La estructura ``try-except`` se utiliza para manejar un KeyboardInterrupt y permitir una salida limpia.

   .. code-block:: python

      try:
         # Monitorear continuamente los obst치culos
         while True:
            if obstacle_sensor.is_pressed:  # Check if the sensor is triggered
                  print("Detected Barrier!")  # Print a message when an obstacle is detected
                  time.sleep(1)  # Delay for 1 second to avoid repetitive messages

      except KeyboardInterrupt:
         # Manejar KeyboardInterrupt (Ctrl+C) para una salida limpia y segura
         pass

