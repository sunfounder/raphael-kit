.. note::

    隆Hola! Bienvenido a la Comunidad de Entusiastas de SunFounder para Raspberry Pi, Arduino y ESP32 en Facebook. Profundiza en Raspberry Pi, Arduino y ESP32 con otros entusiastas.

    **驴Por qu茅 unirse?**

    - **Soporte experto**: Resuelve problemas post-venta y desaf铆os t茅cnicos con la ayuda de nuestra comunidad y equipo.
    - **Aprende y comparte**: Intercambia consejos y tutoriales para mejorar tus habilidades.
    - **Avances exclusivos**: Obt茅n acceso anticipado a nuevos anuncios de productos y avances exclusivos.
    - **Descuentos especiales**: Disfruta de descuentos exclusivos en nuestros productos m谩s nuevos.
    - **Promociones y sorteos festivos**: Participa en sorteos y promociones de temporada.

     驴Listo para explorar y crear con nosotros? Haz clic en [|link_sf_facebook|] y 煤nete hoy mismo!

.. _1.3.1_py_pi5:

1.3.1 Motor
===============

Introducci贸n
-------------------

En este proyecto, aprenderemos a utilizar el L293D para controlar un motor de corriente 
continua (DC) y hacer que gire en sentido horario y antihorario. Dado que el motor de 
corriente continua necesita una corriente mayor, por razones de seguridad, utilizaremos 
el M贸dulo de Alimentaci贸n para suministrar energ铆a a los motores.

Componentes Necesarios
------------------------------

En este proyecto, necesitaremos los siguientes componentes. 

.. image:: ../python_pi5/img/1.3.1_motor_list.png

Es definitivamente conveniente comprar un kit completo, aqu铆 est谩 el enlace:

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - Nombre	
        - ELEMENTOS EN ESTE KIT
        - ENLACE
    *   - Kit Raphael
        - 337
        - |link_Raphael_kit|

Tambi茅n puedes comprarlos por separado en los enlaces a continuaci贸n.

.. list-table::
    :widths: 30 20
    :header-rows: 1

    *   - INTRODUCCIN DE COMPONENTES
        - ENLACE DE COMPRA

    *   - :ref:`cpn_gpio_extension_board`
        - |link_gpio_board_buy|
    *   - :ref:`cpn_breadboard`
        - |link_breadboard_buy|
    *   - :ref:`cpn_wires`
        - |link_wires_buy|
    *   - :ref:`cpn_power_module`
        - \-
    *   - :ref:`cpn_l293d`
        - \-
    *   - :ref:`cpn_motor`
        - |link_motor_buy|


Diagrama Esquem谩tico
-----------------------

.. image:: ../python_pi5/img/1.3.1_motor_schematic.png


Procedimientos Experimentales
-----------------------------------

**Paso 1:** Construye el circuito.

.. image:: ../python_pi5/img/1.3.1_motor_circuit.png

.. note::
    El m贸dulo de alimentaci贸n puede aplicar una bater铆a de 9V con el 
    conector de bater铆a de 9V en el kit. Inserta el capuch贸n del m贸dulo 
    de alimentaci贸n en las tiras de bus de 5V de la placa de pruebas.

.. image:: ../python_pi5/img/1.3.1_motor_battery.jpeg

**Paso 2:** Entra en la carpeta del c贸digo.

.. raw:: html

   <run></run>

.. code-block::

    cd ~/raphael-kit/python-pi5

**Paso 3:** Ejecuta.

.. raw:: html

   <run></run>

.. code-block::

    sudo python3 1.3.1_Motor_zero.py

Cuando el c贸digo se ejecute, el motor primero girar谩 en sentido horario durante 5s, 
luego se detendr谩 durante 5s. Despu茅s, girar谩 en sentido antihorario durante 5s; 
posteriormente, el motor se detendr谩 durante 5s. Esta serie de acciones se ejecutar谩 repetidamente.

.. warning::

    Si recibe el mensaje de error ``RuntimeError: Cannot determine SOC peripheral base address``, consulte :ref:`faq_soc`

**C贸digo**

.. note::

    Puedes **Modificar/Restablecer/Copiar/Ejecutar/Detener** el c贸digo a continuaci贸n. Pero antes de eso, necesitas ir a la ruta del c贸digo fuente como ``raphael-kit/python-pi5``. Despu茅s de modificar el c贸digo, puedes ejecutarlo directamente para ver el efecto.

.. raw:: html

    <run></run>

.. code-block:: python

   #!/usr/bin/env python3
   from gpiozero import Motor
   from time import sleep

   # Inicializar el Motor con GPIO Zero, especificando los pines GPIO para control hacia adelante (17), hacia atr谩s (27) y habilitaci贸n (22)
   motor = Motor(forward=17, backward=27, enable=22)

   try:
       # Funci贸n principal para controlar la direcci贸n y el movimiento del motor.
       # Alterna la rotaci贸n del motor entre sentido horario y antihorario con paradas intermedias.
       actions = {'CW': motor.forward, 'CCW': motor.backward, 'STOP': motor.stop}  # Definir acciones del motor para mayor legibilidad
       
       while True:
           # Iterar a trav茅s de las acciones definidas para controlar la direcci贸n del motor
           for action in ['CW', 'STOP', 'CCW', 'STOP']:
               actions[action]()  # Ejecutar la acci贸n actual (adelante, detener, atr谩s, detener)
               print(f"{action}")  # Mostrar la acci贸n actual en la consola
               sleep(5)  # Pausar durante 5 segundos antes de proceder a la siguiente acci贸n

   except KeyboardInterrupt:
       # Manejar de manera adecuada una interrupci贸n de teclado (por ejemplo, Ctrl+C) para detener el programa
       pass


**Explicaci贸n del C贸digo**

#. Estas declaraciones de importaci贸n traen la clase ``Motor`` de la biblioteca ``gpiozero`` y la funci贸n ``sleep`` del m贸dulo ``time``.
    
   .. code-block:: python  

       #!/usr/bin/env python3
       from gpiozero import Motor
       from time import sleep
      

#. Esta l铆nea inicializa un objeto ``Motor``, especificando los pines GPIO para control hacia adelante (17), hacia atr谩s (27) y habilitaci贸n (22).
    
   .. code-block:: python
       
       # Inicializar el Motor con GPIO Zero, especificando los pines GPIO para control hacia adelante (17), hacia atr谩s (27) y habilitaci贸n (22)
       motor = Motor(forward=17, backward=27, enable=22)
      

#. Las acciones para el control del motor se definen en un diccionario para mayor legibilidad. Un bucle infinito (`while True`) itera a trav茅s de estas acciones, ejecutando cada una durante 5 segundos.
    
   .. code-block:: python
       
       try:
           # Funci贸n principal para controlar la direcci贸n y el movimiento del motor.
           # Alterna la rotaci贸n del motor entre sentido horario y antihorario con paradas intermedias.
           actions = {'CW': motor.forward, 'CCW': motor.backward, 'STOP': motor.stop}  # Definir acciones del motor para mayor legibilidad
           
           while True:
               # Iterar a trav茅s de las acciones definidas para controlar la direcci贸n del motor
               for action in ['CW', 'STOP', 'CCW', 'STOP']:
                   actions[action]()  # Ejecutar la acci贸n actual (adelante, detener, atr谩s, detener)
                   print(f"{action}")  # Mostrar la acci贸n actual en la consola
                   sleep(5)  # Pausar durante 5 segundos antes de proceder a la siguiente acci贸n
      

#. Este segmento permite que el programa se termine de manera segura usando una interrupci贸n de teclado (Ctrl+C) sin causar errores.
    
   .. code-block:: python
       
       except KeyboardInterrupt:
       # Manejar de manera adecuada una interrupci贸n de teclado (por ejemplo, Ctrl+C) para detener el programa
       pass


