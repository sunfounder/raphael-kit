.. note::

    隆Hola! Bienvenido a la Comunidad de Entusiastas de SunFounder Raspberry Pi, Arduino y ESP32 en Facebook. Profundiza en Raspberry Pi, Arduino y ESP32 con otros entusiastas.

    **驴Por qu茅 unirse?**

    - **Soporte Experto**: Resuelve problemas post-venta y desaf铆os t茅cnicos con la ayuda de nuestra comunidad y equipo.
    - **Aprender y Compartir**: Intercambia consejos y tutoriales para mejorar tus habilidades.
    - **Avances Exclusivos**: Accede anticipadamente a anuncios de nuevos productos y adelantos exclusivos.
    - **Descuentos Especiales**: Disfruta de descuentos exclusivos en nuestros productos m谩s nuevos.
    - **Promociones Festivas y Sorteos**: Participa en sorteos y promociones festivas.

     驴Listo para explorar y crear con nosotros? Haz clic en [|link_sf_facebook|] y 煤nete hoy mismo!

.. _2.1.5_py_pi5:

2.1.5 Interruptor de Inclinaci贸n
=====================================

Introducci贸n
-------------------

Este es un interruptor de inclinaci贸n de bola con una bola de metal en su interior. 
Se utiliza para detectar inclinaciones de un peque帽o 谩ngulo.

Componentes Necesarios
-----------------------------

En este proyecto, necesitamos los siguientes componentes.

.. image:: ../python_pi5/img/2.1.5_tilt_switch_list.png

Es definitivamente conveniente comprar un kit completo, aqu铆 est谩 el enlace:

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - Nombre
        - ARTCULOS EN ESTE KIT
        - ENLACE
    *   - Kit Raphael
        - 337
        - |link_Raphael_kit|

Tambi茅n puedes comprarlos por separado desde los enlaces a continuaci贸n.

.. list-table::
    :widths: 30 20
    :header-rows: 1

    *   - INTRODUCCIN DE COMPONENTES
        - ENLACE DE COMPRA

    *   - :ref:`cpn_gpio_extension_board`
        - |link_gpio_board_buy|
    *   - :ref:`cpn_breadboard`
        - |link_breadboard_buy|
    *   - :ref:`cpn_wires`
        - |link_wires_buy|
    *   - :ref:`cpn_resistor`
        - |link_resistor_buy|
    *   - :ref:`cpn_led`
        - |link_led_buy|
    *   - :ref:`cpn_tilt_switch`
        - \-

Diagrama Esquem谩tico
-----------------------

.. image:: ../python_pi5/img/2.1.5_tilt_switch_schematic_1.png

.. image:: ../python_pi5/img/2.1.5_tilt_switch_schematic_2.png


Procedimientos Experimentales
---------------------------------

**Paso 1:** Construir el circuito.

.. image:: ../python_pi5/img/2.1.5_tilt_switch_circuit.png

**Paso 2:** Cambiar directorio.

.. raw:: html

   <run></run>

.. code-block::

    cd ~/raphael-kit/python-pi5

**Paso 3:** Ejecutar.

.. raw:: html

   <run></run>

.. code-block::

    sudo python3 2.1.5_Tilt_zero.py

Coloca el interruptor de inclinaci贸n verticalmente, y el LED verde se encender谩. 
Si lo inclinas, se imprimir谩 "隆Inclinaci贸n!" en la pantalla y el LED rojo se encender谩. 
Col贸calo nuevamente en posici贸n vertical, y el LED verde se encender谩.

.. warning::

    Si recibe el mensaje de error ``RuntimeError: Cannot determine SOC peripheral base address``, consulte :ref:`faq_soc`

**C贸digo**

.. note::

    Puedes **Modificar/Restablecer/Copiar/Ejecutar/Detener** el c贸digo a continuaci贸n. Pero antes de eso, debes ir a la ruta del c贸digo fuente como ``raphael-kit/python-pi5``. Despu茅s de modificar el c贸digo, puedes ejecutarlo directamente para ver el efecto.


.. raw:: html

    <run></run>

.. code-block:: python

   #!/usr/bin/env python3
   from gpiozero import LED, Button

   # Inicializar el bot贸n para el sensor de inclinaci贸n y los LEDs usando GPIO Zero
   TiltPin = Button(17, pull_up=False)  # Sensor de inclinaci贸n conectado al pin GPIO 17, resistor pull-up deshabilitado
   green_led = LED(27)  # LED verde conectado al pin GPIO 27
   red_led = LED(22)   # LED rojo conectado al pin GPIO 22

   def detect():
       """
       Detect the tilt sensor state and control the LEDs.
       Turns on the red LED and turns off the green LED when tilted.
       Turns off the red LED and turns on the green LED when not tilted.
       """
       if TiltPin.is_pressed:  # Verificar si el sensor est谩 inclinado
           print('    *************')
           print('    *   Tilt!   *')
           print('    *************')
           red_led.on()   # Encender LED rojo
           green_led.off()  # Apagar LED verde
       else:  # Si el sensor no est谩 inclinado
           red_led.off()  # Apagar LED rojo
           green_led.on()  # Encender LED verde

   try:
       while True:
           # Verificar continuamente el estado del sensor de inclinaci贸n y actualizar los LEDs
           TiltPin.when_pressed = detect
           TiltPin.when_released = detect

   except KeyboardInterrupt:
       # Manejar KeyboardInterrupt (Ctrl+C) para salir del bucle de manera ordenada
       pass


**Explicaci贸n del C贸digo**

#. Esta l铆nea configura el script para ejecutarse con Python 3 e importa ``LED`` y ``Button`` de ``gpiozero`` para controlar dispositivos GPIO.

   .. code-block:: python

       #!/usr/bin/env python3
       from gpiozero import LED, Button

#. Inicializa el sensor de inclinaci贸n conectado al pin GPIO 17 (con el resistor pull-up deshabilitado) y dos LEDs conectados a los pines GPIO 27 y 22.

   .. code-block:: python

       # Inicializar el bot贸n para el sensor de inclinaci贸n y los LEDs usando GPIO Zero
       TiltPin = Button(17, pull_up=False)  # Sensor de inclinaci贸n conectado al pin GPIO 17, resistor pull-up deshabilitado
       green_led = LED(27)  # LED verde conectado al pin GPIO 27
       red_led = LED(22)   # LED rojo conectado al pin GPIO 22

#. Define la funci贸n ``detect``, que verifica el estado del sensor de inclinaci贸n. Si est谩 inclinado, enciende el LED rojo y apaga el LED verde. Si no est谩 inclinado, hace lo contrario.

   .. code-block:: python

       def detect():
           """
           Detectar el estado del sensor de inclinaci贸n y controlar los LEDs.
           Enciende el LED rojo y apaga el LED verde cuando est谩 inclinado.
           Apaga el LED rojo y enciende el LED verde cuando no est谩 inclinado.
           """
           if TiltPin.is_pressed:  # Verificar si el sensor est谩 inclinado
               print('    *************')
               print('    *   隆Inclinaci贸n!   *')
               print('    *************')
               red_led.on()   # Encender LED rojo
               green_led.off()  # Apagar LED verde
           else:  # Si el sensor no est谩 inclinado
               red_led.off()  # Apagar LED rojo
               green_led.on()  # Encender LED verde

#. El bucle principal asigna la funci贸n ``detect`` a los eventos ``when_pressed`` y ``when_released`` del sensor de inclinaci贸n. El bloque ``try-except`` maneja un KeyboardInterrupt para una terminaci贸n ordenada.

   .. code-block:: python

       try:
           while True:
               # Verificar continuamente el estado del sensor de inclinaci贸n y actualizar los LEDs
               TiltPin.when_pressed = detect
               TiltPin.when_released = detect

       except KeyboardInterrupt:
           # Manejar KeyboardInterrupt (Ctrl+C) para salir del bucle de manera ordenada
           pass
