.. note::

    隆Hola! Bienvenido a la comunidad de entusiastas de SunFounder Raspberry Pi & Arduino & ESP32 en Facebook. Sum茅rgete m谩s en Raspberry Pi, Arduino y ESP32 con otros entusiastas.

    **驴Por qu茅 unirse?**

    - **Soporte experto**: Resuelve problemas post-venta y desaf铆os t茅cnicos con la ayuda de nuestra comunidad y equipo.
    - **Aprende y comparte**: Intercambia consejos y tutoriales para mejorar tus habilidades.
    - **Avances exclusivos**: Obt茅n acceso anticipado a anuncios de nuevos productos y adelantos.
    - **Descuentos especiales**: Disfruta de descuentos exclusivos en nuestros productos m谩s recientes.
    - **Promociones festivas y sorteos**: Participa en sorteos y promociones de temporada.

     驴Listo para explorar y crear con nosotros? Haz clic en [|link_sf_facebook|] y 煤nete hoy mismo.

.. _2.2.5_js:

2.2.5 Sensor de Evitaci贸n de Obst谩culos por IR
====================================================

Introducci贸n
---------------

En este proyecto, aprenderemos sobre el m贸dulo de evitaci贸n de obst谩culos por IR, que es un m贸dulo sensor que se puede usar para detectar obst谩culos a distancias cortas, con poca interferencia, f谩cil de ensamblar, f谩cil de usar, etc. Se puede utilizar ampliamente en la evitaci贸n de obst谩culos en robots, carritos de evitaci贸n de obst谩culos, conteo en l铆neas de ensamblaje, etc.

.. image:: ../img/2.2.5IR_Obstacle.png
   :width: 300
   :align: center

Componentes Necesarios
---------------------------

En este proyecto, necesitamos los siguientes componentes. 

.. image:: ../img/2.2.5component.png
   :width: 700
   :align: center

Es definitivamente conveniente comprar un kit completo, aqu铆 est谩 el enlace: 

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - Nombre
        - ELEMENTOS EN ESTE KIT
        - ENLACE
    *   - Kit Raphael
        - 337
        - |link_Raphael_kit|

Tambi茅n puedes comprarlos por separado en los enlaces a continuaci贸n.

.. list-table::
    :widths: 30 20
    :header-rows: 1

    *   - INTRODUCCIN DEL COMPONENTE
        - ENLACE DE COMPRA

    *   - :ref:`cpn_gpio_board`
        - |link_gpio_board_buy|
    *   - :ref:`cpn_breadboard`
        - |link_breadboard_buy|
    *   - :ref:`cpn_wires`
        - |link_wires_buy|
    *   - :ref:`cpn_avoid_module`
        - |link_obstacle_avoidance_buy|

Diagrama Esquem谩tico
--------------------------

.. image:: ../img/IR_schematic.png
   :width: 500
   :align: center
   
Procedimientos Experimentales
--------------------------------

**Paso 1:** Construir el circuito

.. image:: ../img/2.2.5fritzing.png
   :width: 700
   :align: center

**Paso 2:** Ir a la carpeta del c贸digo.

.. raw:: html

   <run></run>

.. code-block::

   cd ~/raphael-kit/nodejs/

**Paso 3:** Ejecutar el c贸digo.

.. raw:: html

   <run></run>

.. code-block::

   sudo node ir_obstacle.js

Despu茅s de ejecutar el c贸digo, cuando pongas tu mano frente a la sonda del m贸dulo, el indicador de salida del m贸dulo se encender谩 y "隆Barrera Detectada!" ser谩 
impreso repetidamente en la pantalla hasta que retires tu mano.


**C贸digo**

.. code-block:: js

   const Gpio = require('pigpio').Gpio; 

   const ir_ob = new Gpio(17, {
      mode: Gpio.INPUT,
      pullUpDown: Gpio.PUD_DOWN,     
      edge: Gpio.FALLING_EDGE        
   });

   ir_ob.on('interrupt', () => {  
      console.log('Detected Barrier!');        
   });




**Explicaci贸n del C贸digo**

.. code-block:: js

   const Gpio = require('pigpio').Gpio; 

   const ir_ob = new Gpio(17, {
      mode: Gpio.INPUT,
      pullUpDown: Gpio.PUD_DOWN,     
      edge: Gpio.FALLING_EDGE        
   });

Importar el m贸dulo pigpio, crear un objeto para controlar el puerto IO Gpio17,
Config煤ralo en modo de entrada e interrupci贸n en el borde descendente.

.. code-block:: js

   ir_ob.on('interrupt', () => {  
      console.log('Detected Barrier!');        
   });

Cuando se desencadena una interrupci贸n, lo que significa que se detecta un obst谩culo, imprime "隆Barrera Detectada!".

Imagen del Fen贸meno
-------------------

.. image:: ../img/2.2.5IR.JPG
   :width: 500
