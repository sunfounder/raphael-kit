.. note::

    Hola, 춰bienvenido a la comunidad de entusiastas de SunFounder Raspberry Pi & Arduino & ESP32 en Facebook! Profundiza en Raspberry Pi, Arduino y ESP32 con otros entusiastas.

    **쯇or qu칠 unirse?**

    - **Soporte Experto**: Resuelve problemas postventa y desaf칤os t칠cnicos con la ayuda de nuestra comunidad y equipo.
    - **Aprender y Compartir**: Intercambia consejos y tutoriales para mejorar tus habilidades.
    - **Vistas Exclusivas**: Obt칠n acceso anticipado a anuncios de nuevos productos y adelantos.
    - **Descuentos Especiales**: Disfruta de descuentos exclusivos en nuestros productos m치s nuevos.
    - **Promociones y Sorteos Festivos**: Participa en sorteos y promociones festivas.

    游녤 쯃isto para explorar y crear con nosotros? Haz clic en [|link_sf_facebook|] y 칰nete hoy mismo.

.. _2.1.5_js:

2.1.5 Interruptor de Inclinaci칩n
====================================

Introducci칩n
----------------

Este es un interruptor de inclinaci칩n con una bola de metal en su interior. 
Se utiliza para detectar inclinaciones de un peque침o 치ngulo.

Componentes Requeridos
------------------------------

En este proyecto, necesitamos los siguientes componentes.

.. image:: ../img/list_2.1.3_tilt_switch.png

Es definitivamente conveniente comprar un kit completo, aqu칤 est치 el enlace:

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - Nombre	
        - 칈TEMS EN ESTE KIT
        - ENLACE
    *   - Kit Raphael
        - 337
        - |link_Raphael_kit|

Tambi칠n puedes comprarlos por separado desde los enlaces a continuaci칩n.

.. list-table::
    :widths: 30 20
    :header-rows: 1

    *   - INTRODUCCI칍N DEL COMPONENTE
        - ENLACE DE COMPRA

    *   - :ref:`cpn_gpio_board`
        - |link_gpio_board_buy|
    *   - :ref:`cpn_breadboard`
        - |link_breadboard_buy|
    *   - :ref:`cpn_wires`
        - |link_wires_buy|
    *   - :ref:`cpn_resistor`
        - |link_resistor_buy|
    *   - :ref:`cpn_led`
        - |link_led_buy|
    *   - :ref:`cpn_tilt_switch`
        - \-

Diagrama Esquem치tico
-----------------------

.. image:: ../img/image307.png

.. image:: ../img/image308.png


Procedimientos Experimentales
-----------------------------------

**Paso 1:** Construye el circuito.

.. image:: ../img/image169.png

**Paso 2:** Ve a la carpeta del c칩digo.

.. raw:: html

   <run></run>

.. code-block:: 

    cd ~/raphael-kit/nodejs/

**Paso 3:** Ejecuta el c칩digo.

.. raw:: html

   <run></run>

.. code-block:: 

    sudo node tilt_switch.js

Coloca el interruptor de inclinaci칩n verticalmente, y el LED verde se encender치. 
Si lo inclinas, el LED rojo se encender치. Col칩calo verticalmente de nuevo, y el 
LED verde se encender치.
**Code**

.. raw:: html

    <run></run>

.. code-block:: js

    const Gpio = require('pigpio').Gpio;

    const led1 = new Gpio(22, { mode: Gpio.OUTPUT });
    const led2 = new Gpio(27, { mode: Gpio.OUTPUT });

    const tilt = new Gpio(17, {
        mode: Gpio.INPUT,
        pullUpDown: Gpio.PUD_DOWN,     
        edge: Gpio.EITHER_EDGE        
    });

    tilt.on('interrupt', (level) => {  
        if (level) {
            console.log("Horizontally");
        }
        else {
            console.log("Vertically");
        }
        led1.digitalWrite(level);
        led2.digitalWrite(!level);    
    });

**Code Explanation**

.. code-block:: js

    const Gpio = require('pigpio').Gpio;

    const led1 = new Gpio(22, { mode: Gpio.OUTPUT });
    const led2 = new Gpio(27, { mode: Gpio.OUTPUT });

    const tilt = new Gpio(17, {
        mode: Gpio.INPUT,
        pullUpDown: Gpio.PUD_DOWN,     
        edge: Gpio.EITHER_EDGE        
    }); 

Importa el m칩dulo pigpio y crea tres objetos: led1, led2 y tilt.
Al leer el nivel del puerto IO del sensor de inclinaci칩n, se controla el encendido y apagado de led1 y led2.

.. code-block:: js

    const tilt = new Gpio(17, {
        mode: Gpio.INPUT,
        pullUpDown: Gpio.PUD_DOWN,     
        edge: Gpio.EITHER_EDGE       
    });

Crea un objeto tilt para controlar el puerto IO Gpio17, config칰ralo en modo de entrada con resistencia pull-down (inicialmente nivel bajo).
Y configura la funci칩n de interrupci칩n, el modo es EITHER_EDGE, es decir, tanto los flancos ascendentes como descendentes activar치n la funci칩n de interrupci칩n.

.. code-block:: js

    tilt.on('interrupt', (level) => {  
        if (level) {
            console.log("Horizontally");
        }
        else {
            console.log("Vertically");
        }
        led1.digitalWrite(level);
        led2.digitalWrite(!level);    
    });

Cuando se activa la interrupci칩n, escribe el mismo nivel en led1 y el nivel opuesto en led2.
Cuando el puerto IO del sensor de inclinaci칩n est치 en alto, el terminal imprime "Horizontally";
Cuando el puerto IO del sensor de inclinaci칩n est치 en bajo, el terminal imprime "Vertically".

Phenomenon Picture
------------------

.. image:: ../img/image170.jpeg
