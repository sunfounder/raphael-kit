.. note::

    隆Hola, bienvenido a la comunidad de entusiastas de SunFounder Raspberry Pi, Arduino y ESP32 en Facebook! Sum茅rgete m谩s profundamente en Raspberry Pi, Arduino y ESP32 con otros entusiastas.

    **驴Por qu茅 unirse?**

    - **Soporte experto**: Resuelve problemas postventa y desaf铆os t茅cnicos con la ayuda de nuestra comunidad y equipo.
    - **Aprende y comparte**: Intercambia consejos y tutoriales para mejorar tus habilidades.
    - **Vistas previas exclusivas**: Obt茅n acceso anticipado a anuncios de nuevos productos y avances.
    - **Descuentos especiales**: Disfruta de descuentos exclusivos en nuestros productos m谩s recientes.
    - **Promociones festivas y sorteos**: Participa en sorteos y promociones de temporada.

     驴Listo para explorar y crear con nosotros? Haz clic en [|link_sf_facebook|] y 煤nete hoy mismo!

.. _1.1.1_js:

1.1.1 LED Parpadeante
=========================

Introducci贸n
-----------------

En este proyecto, aprenderemos a hacer parpadear un LED mediante programaci贸n. 
A trav茅s de tus configuraciones, tu LED puede producir una serie de fen贸menos interesantes. 
隆Ahora, adelante!

Componentes Necesarios
------------------------------

En este proyecto, necesitamos los siguientes componentes. 

.. image:: img/blinking_led_list.png
    :width: 800
    :align: center

Es definitivamente conveniente comprar un kit completo, aqu铆 est谩 el enlace: 

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - Nombre	
        - ELEMENTOS EN ESTE KIT
        - ENLACE
    *   - Kit Raphael
        - 337
        - |link_Raphael_kit|

Tambi茅n puedes comprarlos por separado en los enlaces a continuaci贸n.

.. list-table::
    :widths: 30 20
    :header-rows: 1

    *   - INTRODUCCIN DEL COMPONENTE
        - ENLACE DE COMPRA

    *   - :ref:`cpn_gpio_board`
        - |link_gpio_board_buy|
    *   - :ref:`cpn_breadboard`
        - |link_breadboard_buy|
    *   - :ref:`cpn_wires`
        - |link_wires_buy|
    *   - :ref:`cpn_resistor`
        - |link_resistor_buy|
    *   - :ref:`cpn_led`
        - |link_led_buy|

Diagrama Esquem谩tico
---------------------------

En este experimento, conecta una resistencia de 220惟 al 谩nodo (la pata larga del LED), 
luego la resistencia a 3.3 V, y conecta el c谩todo (la pata corta) del LED a GPIO17 de 
Raspberry Pi. Por lo tanto, para encender un LED, necesitamos hacer que GPIO17 est茅 en 
nivel bajo (0V). Podemos obtener este fen贸meno mediante programaci贸n.

.. image:: img/image48.png
    :width: 800
    :align: center

Procedimientos Experimentales
-----------------------------------

**Paso 1:** Construye el circuito.

.. image:: img/image49.png
    :width: 800
    :align: center

**Paso 2:** Ve a la carpeta del c贸digo.

.. raw:: html

   <run></run>

.. code-block::

   cd ~/raphael-kit/nodejs/

.. note::
    Cambia el directorio a la ruta del c贸digo en este experimento v铆a ``cd``.

**Paso 3:** Ejecuta el c贸digo

.. raw:: html

   <run></run>

.. code-block::

   sudo node blink.js

.. note::
    Aqu铆 sudo significa "superuser do", y python significa ejecutar el archivo con Python.

Despu茅s de ejecutar el c贸digo, ver谩s que el LED parpadea.

**Paso 4:** Si deseas editar el archivo de c贸digo blink.js,
presiona ``Ctrl + C`` para detener la ejecuci贸n del c贸digo. Luego escribe el siguiente
comando para abrir blink.js:

.. raw:: html

   <run></run>

.. code-block::

   nano blink.js

.. note::
    nano es una herramienta de edici贸n de texto. El comando se usa para abrir el
    archivo de c贸digo blink.js con esta herramienta.

Presiona ``Ctrl+X`` para salir. Si has modificado el c贸digo, aparecer谩 un
mensaje preguntando si deseas guardar los cambios o no. Escribe ``Y`` (guardar)
o ``N`` (no guardar).

Luego presiona ``Enter`` para salir. Escribe nano blink.js nuevamente para
ver el efecto despu茅s del cambio.


**C贸digo**

El siguiente es el c贸digo del programa:

.. code-block:: js

   const Gpio = require('pigpio').Gpio;
   const led = new Gpio(17,{mode: Gpio.OUTPUT});

   var led_state = 0;

   function blink_led(){
      led.digitalWrite(led_state);
      led_state = !led_state;
   }

   setInterval(blink_led,300);


Alternativamente, escribe el c贸digo como una funci贸n de flecha espec铆fica de js:

.. code-block:: js

   const Gpio = require('pigpio').Gpio;
   const led = new Gpio(17,{mode: Gpio.OUTPUT});

   var led_state = 0;

   setInterval(() => {
      led.digitalWrite(led_state);
      led_state = !led_state;
   }, 300);


**Explicaci贸n del C贸digo**

.. code-block:: js

   const Gpio = require('pigpio').Gpio;

Importa el constructor Gpio del paquete pigpio de esta manera,
y luego define una constante ``Gpio`` para representar este constructor.

Con una variedad de constructores, podemos usar js para controlar dispositivos electr贸nicos.
``pigpio`` se puede utilizar para implementar GPIO r谩pido, PWM, control de servos, notificaci贸n de cambios de estado y manejo de interrupciones.

* `pigpio - github <https://github.com/fivdi/pigpio>`_

.. Una envoltura para la biblioteca C de pigpio que permite un r谩pido control de GPIO, PWM, servos,
.. notificaci贸n de cambios de estado y manejo de interrupciones con JS en la Raspberry Pi Zero,
.. 1, 2, 3 o 4.

.. code-block:: js

   const led = new Gpio(17,{mode: Gpio.OUTPUT});

La palabra clave ``new`` se usa para construir objetos instanciados de la clase.

Conecta el LED al GPIO17 de la placa de expansi贸n en forma de T,
establece el modo de LedPin en salida y as铆gnalo a la constante ``led``,
es decir, construye un objeto GPIO17 ``led``, y su modo es el modo de salida.

Hay dos formas de numerar los pines IO en la Raspberry Pi:
n煤mero BOARD y n煤mero BCM. En nuestro proyecto, usamos el n煤mero BCM.
Necesitas configurar cada canal usado como entrada o salida.

.. code-block:: js

   function blink_led(){
      led.digitalWrite(led_state);
      led_state = !led_state;
   }

   setInterval(blink_led,300);

El m茅todo ``setInterval()`` puede llamar funciones o calcular expresiones con un per铆odo especificado (en milisegundos).
Aqu铆 cambiamos el estado de funcionamiento del LED con un per铆odo de 300ms.

*  `setInterval <https://developer.mozilla.org/en-US/docs/Web/API/setInterval>`_

El m茅todo ``gpio.digitalWrite(level)`` establece el nivel del gpio en 1 o 0.

.. code-block:: js


   var led_state = 0;

   setInterval(() => {
      led.digitalWrite(led_state);
      led_state = !led_state;
   }, 300);

Reescribe el c贸digo como una funci贸n de flecha para hacerlo m谩s corto.

* `Funciones Flecha <https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions>`_

Imagen del Fen贸meno
-------------------------

.. image:: img/image54.jpeg
    :width: 800
    :align: center