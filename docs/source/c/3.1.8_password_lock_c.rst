.. note::

    Hallo und willkommen in der SunFounder Raspberry Pi & Arduino & ESP32 Enthusiasten-Gemeinschaft auf Facebook! Tauchen Sie tiefer ein in die Welt von Raspberry Pi, Arduino und ESP32 mit anderen Enthusiasten.

    **Warum beitreten?**

    - **Expertenunterst√ºtzung**: L√∂sen Sie Nachverkaufsprobleme und technische Herausforderungen mit Hilfe unserer Gemeinschaft und unseres Teams.
    - **Lernen & Teilen**: Tauschen Sie Tipps und Anleitungen aus, um Ihre F√§higkeiten zu verbessern.
    - **Exklusive Vorschauen**: Erhalten Sie fr√ºhzeitigen Zugang zu neuen Produktank√ºndigungen und exklusiven Einblicken.
    - **Spezialrabatte**: Genie√üen Sie exklusive Rabatte auf unsere neuesten Produkte.
    - **Festliche Aktionen und Gewinnspiele**: Nehmen Sie an Gewinnspielen und Feiertagsaktionen teil.

    üëâ Sind Sie bereit, mit uns zu erkunden und zu erschaffen? Klicken Sie auf [|link_sf_facebook|] und treten Sie heute bei!

.. _3.1.8_c:

3.1.8 Passwortschloss
==========================

Einf√ºhrung
-----------------

In diesem Projekt werden wir ein Keypad und ein LCD verwenden, um ein Kombinationsschloss zu erstellen. Das LCD zeigt eine entsprechende Aufforderung an, damit Sie Ihr Passwort auf dem Keypad eingeben k√∂nnen. Wenn das Passwort korrekt eingegeben wird, wird ‚ÄûRichtig‚Äú angezeigt.

Auf Basis dieses Projekts k√∂nnen wir zus√§tzliche elektronische Komponenten hinzuf√ºgen, wie z.B. einen Summer, LEDs usw., um unterschiedliche experimentelle Ph√§nomene bei der Passworteingabe hinzuzuf√ºgen.

Ben√∂tigte Komponenten
------------------------------

F√ºr dieses Projekt ben√∂tigen wir folgende Komponenten.

.. image:: ../img/list_Password_Lock.png
    :align: center

Es ist definitiv praktisch, ein komplettes Kit zu kaufen. Hier ist der Link:

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - Name	
        - ARTIKEL IN DIESEM KIT
        - LINK
    *   - Raphael Kit
        - 337
        - |link_Raphael_kit|

Sie k√∂nnen sie auch einzeln √ºber die untenstehenden Links kaufen.

.. list-table::
    :widths: 30 20
    :header-rows: 1

    *   - KOMPONENTENVORSTELLUNG
        - KAUF-LINK

    *   - :ref:`cpn_gpio_board`
        - |link_gpio_board_buy|
    *   - :ref:`cpn_breadboard`
        - |link_breadboard_buy|
    *   - :ref:`cpn_wires`
        - |link_wires_buy|
    *   - :ref:`cpn_resistor`
        - |link_resistor_buy|
    *   - :ref:`cpn_i2c_lcd`
        - |link_i2clcd1602_buy|
    *   - :ref:`cpn_keypad`
        - \-

Schaltplan
------------------

============ ======== ======== ===
T-Board Name physical wiringPi BCM
GPIO18       Pin 12   1        18
GPIO23       Pin 16   4        23
GPIO24       Pin 18   5        24
GPIO25       Pin 22   6        25
GPIO17       Pin 11   0        17
GPIO27       Pin 13   2        27
GPIO22       Pin 15   3        22
SPIMOSI      Pin 19   12       10
SDA1         Pin 3             
SCL1         Pin 5             
============ ======== ======== ===

.. image:: ../img/Schematic_three_one9.png
   :align: center

Experimentelle Verfahren
-------------------------

**Schritt 1:** Schaltung aufbauen.

.. image:: ../img/image262.png

**Schritt 2**: Verzeichnis wechseln.

.. raw:: html

   <run></run>

.. code-block:: 

    cd ~/raphael-kit/c/3.1.8/

**Schritt 3**: Kompilieren.

.. raw:: html

   <run></run>

.. code-block::

    gcc 3.1.8_PasswordLock.cpp -lwiringPi

**Schritt 4:** Ausf√ºhren.

.. raw:: html

   <run></run>

.. code-block::

    sudo ./a.out

Nachdem der Code ausgef√ºhrt wurde, verwenden Sie das Keypad, um das richtige Passwort: 1984 einzugeben. Wenn ‚ÄûRICHTIG‚Äú auf dem LCD1602 erscheint, liegt kein Fehler beim Passwort vor; andernfalls wird ‚ÄûFALSCHE TASTE‚Äú angezeigt.

.. note::

    * Wenn die Fehlermeldung ‚ÄûwiringPi.h: Datei oder Verzeichnis nicht gefunden‚Äú angezeigt wird, beziehen Sie sich bitte auf :ref:`install_wiringpi`.
    * Wenn Sie den Fehler ‚ÄûUnable to open I2C device: Datei oder Verzeichnis nicht gefunden‚Äú erhalten, m√ºssen Sie sich auf :ref:`i2c_config` beziehen, um I2C zu aktivieren und zu √ºberpr√ºfen, ob die Verkabelung korrekt ist.
    * Wenn der Code und die Verkabelung in Ordnung sind, das LCD jedoch keinen Inhalt anzeigt, k√∂nnen Sie das Potentiometer auf der R√ºckseite drehen, um den Kontrast zu erh√∂hen.

**Code-Erkl√§rung**

.. code-block:: c

    #define ROWS  4 
    #define COLS  4
    #define BUTTON_NUM (ROWS * COLS)
    #define LENS  4

    unsigned char KEYS[BUTTON_NUM] {  
    '1','2','3','A',
    '4','5','6','B',
    '7','8','9','C',
    '*','0','#','D'};

    char password[LENS]={'1','9','8','4'};

Hier definieren wir die L√§nge des Passworts LENS, das Speichermatrix-Tastatur-Tastenwert-Array KEYS und das Array, das das korrekte Passwort speichert.

.. code-block:: c

    void keyRead(unsigned char* result);
    bool keyCompare(unsigned char* a, unsigned char* b);
    void keyCopy(unsigned char* a, unsigned char* b);
    void keyPrint(unsigned char* a);
    void keyClear(unsigned char* a);
    int keyIndexOf(const char value);

Dies sind die Deklarationen der Unterfunktionen des Matrix-Tastatur-Codes. F√ºr weitere Details siehe :ref:`2.1.8_c` in diesem Dokument.

.. code-block:: c

    void write_word(int data);
    void send_command(int comm);
    void send_data(int data);
    void lcdInit();
    void clear();
    void write(int x, int y, char const data[]);

Hier sind die Deklarationen der Unterfunktionen des LCD1062-Codes. F√ºr weitere Details siehe :ref:`1.1.7_c` in diesem Dokument.

.. code-block:: c

    while(1){
            keyRead(pressed_keys);
            bool comp = keyCompare(pressed_keys, last_key_pressed);
            ...
                    testword[keyIndex]=pressed_keys[0];
                    keyIndex++;
                    if(keyIndex==LENS){
                        if(check()==0){
                            clear();
                            write(3, 0, "WRONG KEY!");
                            write(0, 1, "please try again");
                            }
                    ...

Liest den Tastenwert und speichert ihn im Test-Array testword. Wenn die Anzahl der gespeicherten Tastenwerte mehr als 4 betr√§gt, wird die Richtigkeit des Passworts automatisch √ºberpr√ºft und die √úberpr√ºfungsergebnisse werden auf der LCD-Schnittstelle angezeigt.

.. code-block:: c

    int check(){
        for(int i=0;i<LENS;i++){
            if(password[i]!=testword[i])
            {return 0;}
        }
        return 1;
    }

√úberpr√ºfen Sie die Richtigkeit des Passworts. Gibt 1 zur√ºck, wenn das Passwort korrekt eingegeben wurde, und 0, wenn nicht.

Ph√§nomen-Bild
---------------------

.. image:: ../img/image263.jpeg
   :align: center