.. note::

    ã“ã‚“ã«ã¡ã¯ã€SunFounderã®Raspberry Pi & Arduino & ESP32æ„›å¥½å®¶ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã¸ã‚ˆã†ã“ãï¼Facebookä¸Šã§Raspberry Piã€Arduinoã€ESP32ã«ã¤ã„ã¦ã‚‚ã£ã¨æ·±ãæ˜ã‚Šä¸‹ã’ã€ä»–ã®æ„›å¥½å®¶ã¨äº¤æµã—ã¾ã—ã‚‡ã†ã€‚

    **å‚åŠ ã™ã‚‹ç†ç”±ã¯ï¼Ÿ**

    - **ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã‚µãƒãƒ¼ãƒˆ**ï¼šã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚„ãƒãƒ¼ãƒ ã®åŠ©ã‘ã‚’å€Ÿã‚Šã¦ã€è²©å£²å¾Œã®å•é¡Œã‚„æŠ€è¡“çš„ãªèª²é¡Œã‚’è§£æ±ºã—ã¾ã™ã€‚
    - **å­¦ã³ï¼†å…±æœ‰**ï¼šãƒ’ãƒ³ãƒˆã‚„ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’äº¤æ›ã—ã¦ã‚¹ã‚­ãƒ«ã‚’å‘ä¸Šã•ã›ã¾ã—ã‚‡ã†ã€‚
    - **ç‹¬å çš„ãªãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**ï¼šæ–°è£½å“ã®ç™ºè¡¨ã‚„å…ˆè¡Œãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«æ—©æœŸã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã—ã‚‡ã†ã€‚
    - **ç‰¹åˆ¥å‰²å¼•**ï¼šæœ€æ–°è£½å“ã®ç‹¬å å‰²å¼•ã‚’ãŠæ¥½ã—ã¿ãã ã•ã„ã€‚
    - **ç¥­ã‚Šã®ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‚®ãƒ•ãƒˆ**ï¼šã‚®ãƒ•ãƒˆã‚„ç¥æ—¥ã®ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã«å‚åŠ ã—ã¾ã—ã‚‡ã†ã€‚

    ğŸ‘‰ ç§ãŸã¡ã¨ä¸€ç·’ã«æ¢ç´¢ã—ã€å‰µé€ ã™ã‚‹æº–å‚™ã¯ã§ãã¦ã„ã¾ã™ã‹ï¼Ÿ[|link_sf_facebook|]ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä»Šã™ãå‚åŠ ã—ã¾ã—ã‚‡ã†ï¼

.. _2.1.7_c:

2.1.7 ãƒãƒ†ãƒ³ã‚·ãƒ§ãƒ¡ãƒ¼ã‚¿ãƒ¼
=========================

ã¯ã˜ã‚ã«
------------

ADCæ©Ÿèƒ½ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ã‚¢ãƒŠãƒ­ã‚°ä¿¡å·ã‚’ãƒ‡ã‚¸ã‚¿ãƒ«ä¿¡å·ã«å¤‰æ›ã§ãã¾ã™ã€‚ã“ã®å®Ÿé¨“ã§ã¯ã€ADC0834ã‚’ä½¿ç”¨ã—ã¦ADCã«é–¢ã™ã‚‹æ©Ÿèƒ½ã‚’å–å¾—ã—ã¾ã™ã€‚ã“ã“ã§ã¯ã€ãƒãƒ†ãƒ³ã‚·ãƒ§ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ã“ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’å®Ÿè£…ã—ã¾ã™ã€‚ãƒãƒ†ãƒ³ã‚·ãƒ§ãƒ¡ãƒ¼ã‚¿ãƒ¼ã¯ç‰©ç†çš„ãªé‡ã§ã‚ã‚‹é›»åœ§ã‚’å¤‰åŒ–ã•ã›ã€ã“ã‚Œã¯ADCæ©Ÿèƒ½ã«ã‚ˆã£ã¦å¤‰æ›ã•ã‚Œã¾ã™ã€‚

å¿…è¦ãªéƒ¨å“
------------------------------

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ä»¥ä¸‹ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå¿…è¦ã§ã™ã€‚

.. image:: ../img/list_2.1.4_potentiometer.png

ã‚­ãƒƒãƒˆå…¨ä½“ã‚’è³¼å…¥ã™ã‚‹ã¨éå¸¸ã«ä¾¿åˆ©ã§ã™ã€‚ãƒªãƒ³ã‚¯ã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ï¼š

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - åå‰	
        - ã“ã®ã‚­ãƒƒãƒˆã®ã‚¢ã‚¤ãƒ†ãƒ 
        - ãƒªãƒ³ã‚¯
    *   - Raphael Kit
        - 337
        - |link_Raphael_kit|

ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯ã‹ã‚‰å€‹åˆ¥ã«è³¼å…¥ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

.. list-table::
    :widths: 30 20
    :header-rows: 1

    *   - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ç´¹ä»‹
        - è³¼å…¥ãƒªãƒ³ã‚¯

    *   - :ref:`cpn_gpio_board`
        - |link_gpio_board_buy|
    *   - :ref:`cpn_breadboard`
        - |link_breadboard_buy|
    *   - :ref:`cpn_wires`
        - |link_wires_buy|
    *   - :ref:`cpn_resistor`
        - |link_resistor_buy|
    *   - :ref:`cpn_led`
        - |link_led_buy|
    *   - :ref:`cpn_potentiometer`
        - |link_potentiometer_buy|
    *   - :ref:`cpn_adc0834`
        - \-

å›è·¯å›³
-----------------

.. image:: ../img/image311.png

.. image:: ../img/image312.png

å®Ÿé¨“æ‰‹é †
-----------------------

**ã‚¹ãƒ†ãƒƒãƒ—1:** å›è·¯ã‚’çµ„ã¿ç«‹ã¦ã¾ã™ã€‚

.. image:: ../img/image180.png

.. note::
    ç”»åƒã§ç¤ºã•ã‚Œã¦ã„ã‚‹å¯¾å¿œã™ã‚‹ä½ç½®ã‚’å‚ç…§ã—ã¦ã€ãƒãƒƒãƒ—ã‚’é…ç½®ã—ã¦ãã ã•ã„ã€‚ãƒãƒƒãƒ—ã®æºã¯ã€é…ç½®æ™‚ã«å·¦ã«ãªã‚‹ã‚ˆã†ã«ã—ã¦ãã ã•ã„ã€‚

**ã‚¹ãƒ†ãƒƒãƒ—2:** ã‚³ãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã¾ã™ã€‚

.. raw:: html

   <run></run>

.. code-block::

    cd ~/raphael-kit/c/2.1.7/

**ã‚¹ãƒ†ãƒƒãƒ—3:** ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¾ã™ã€‚

.. raw:: html

   <run></run>

.. code-block::

    gcc 2.1.7_Potentiometer.c -lwiringPi

**ã‚¹ãƒ†ãƒƒãƒ—4:** å®Ÿè¡Œã—ã¾ã™ã€‚

.. raw:: html

   <run></run>

.. code-block::

    sudo ./a.out

ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ãŸå¾Œã€ãƒãƒ†ãƒ³ã‚·ãƒ§ãƒ¡ãƒ¼ã‚¿ãƒ¼ã®ãƒãƒ–ã‚’å›ã™ã¨ã€LEDã®å¼·åº¦ãŒãã‚Œã«å¿œã˜ã¦å¤‰ã‚ã‚Šã¾ã™ã€‚

.. note::

    å®Ÿè¡Œå¾Œã«å‹•ä½œã—ãªã„ã€ã¾ãŸã¯ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ŒwiringPi.h: No such file or directoryã€ãŒè¡¨ç¤ºã•ã‚ŒãŸå ´åˆã¯ã€ :ref:`install_wiringpi` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

**ã‚³ãƒ¼ãƒ‰**

.. code-block:: c

    #include <wiringPi.h>
    #include <stdio.h>
    #include <softPwm.h>

    typedef unsigned char uchar;
    typedef unsigned int uint;

    #define     ADC_CS    0
    #define     ADC_CLK   1
    #define     ADC_DIO   2
    #define     LedPin    3

    uchar get_ADC_Result(uint channel)
    {
        uchar i;
        uchar dat1=0, dat2=0;
        int sel = channel > 1 & 1;
        int odd = channel & 1;

        digitalWrite(ADC_CLK, 1);
        delayMicroseconds(2);
        digitalWrite(ADC_CLK, 0);
        delayMicroseconds(2);

        pinMode(ADC_DIO, OUTPUT);
        digitalWrite(ADC_CS, 0);
        // Start bit
        digitalWrite(ADC_CLK,0);
        digitalWrite(ADC_DIO,1);    delayMicroseconds(2);
        digitalWrite(ADC_CLK,1);    delayMicroseconds(2);
        //Single End mode
        digitalWrite(ADC_CLK,0);
        digitalWrite(ADC_DIO,1);    delayMicroseconds(2);
        digitalWrite(ADC_CLK,1);    delayMicroseconds(2);
        // ODD
        digitalWrite(ADC_CLK,0);
        digitalWrite(ADC_DIO,odd);  delayMicroseconds(2);
        digitalWrite(ADC_CLK,1);    delayMicroseconds(2);
        //Select
        digitalWrite(ADC_CLK,0);
        digitalWrite(ADC_DIO,sel);    delayMicroseconds(2);
        digitalWrite(ADC_CLK,1);

        digitalWrite(ADC_DIO,1);    delayMicroseconds(2);
        digitalWrite(ADC_CLK,0);
        digitalWrite(ADC_DIO,1);    delayMicroseconds(2);

        for(i=0;i<8;i++)
        {
            digitalWrite(ADC_CLK,1);    delayMicroseconds(2);
            digitalWrite(ADC_CLK,0);    delayMicroseconds(2);

            pinMode(ADC_DIO, INPUT);
            dat1=dat1<<1 | digitalRead(ADC_DIO);
        }

        for(i=0;i<8;i++)
        {
            dat2 = dat2 | ((uchar)(digitalRead(ADC_DIO))<<i);
            digitalWrite(ADC_CLK,1);    delayMicroseconds(2);
            digitalWrite(ADC_CLK,0);    delayMicroseconds(2);
        }

        digitalWrite(ADC_CS,1);
        pinMode(ADC_DIO, OUTPUT);
        return(dat1==dat2) ? dat1 : 0;
    }

    int main(void)
    {
        uchar analogVal;
        if(wiringPiSetup() == -1){ //when initialize wiring failed,print messageto screen
            printf("setup wiringPi failed !");
            return 1;
        }
        softPwmCreate(LedPin,  0, 100);
        pinMode(ADC_CS,  OUTPUT);
        pinMode(ADC_CLK, OUTPUT);

        while(1){
            analogVal = get_ADC_Result(0);
            printf("Current analogVal : %d\n", analogVal);
            softPwmWrite(LedPin, analogVal);
            delay(100);
        }
        return 0;
    }

**ã‚³ãƒ¼ãƒ‰èª¬æ˜**

.. code-block:: c

    #define     ADC_CS    0
    #define     ADC_CLK   1
    #define     ADC_DIO   2
    #define     LedPin    3

ADC0834ã®CSã€CLKã€DIOã‚’å®šç¾©ã—ã€GPIO0ã€GPIO1ã€ãŠã‚ˆã³GPIOã«æ¥ç¶šã—ã¾ã™ã€‚
ãã‚Œãã‚ŒGPIO2ã€‚ æ¬¡ã«GPIO3ã«LEDã‚’å–ã‚Šä»˜ã‘ã¾ã™ã€‚

.. code-block:: c

    uchar get_ADC_Result(uint channel)
    {
        uchar i;
        uchar dat1=0, dat2=0;
        int sel = channel > 1 & 1;
        int odd = channel & 1;

        pinMode(ADC_DIO, OUTPUT);
        digitalWrite(ADC_CS, 0);
        // Start bit
        digitalWrite(ADC_CLK,0);
        digitalWrite(ADC_DIO,1);    delayMicroseconds(2);
        digitalWrite(ADC_CLK,1);    delayMicroseconds(2);
    //Single End mode
        digitalWrite(ADC_CLK,0);
        digitalWrite(ADC_DIO,1);    delayMicroseconds(2);
        digitalWrite(ADC_CLK,1);    delayMicroseconds(2);
        // ODD
        digitalWrite(ADC_CLK,0);
        digitalWrite(ADC_DIO,odd);  delayMicroseconds(2);
        digitalWrite(ADC_CLK,1);    delayMicroseconds(2);
        //Select
        digitalWrite(ADC_CLK,0);
        digitalWrite(ADC_DIO,sel);    delayMicroseconds(2);
        digitalWrite(ADC_CLK,1);

        digitalWrite(ADC_DIO,1);    delayMicroseconds(2);
        digitalWrite(ADC_CLK,0);
        digitalWrite(ADC_DIO,1);    delayMicroseconds(2);
        for(i=0;i<8;i++)
        {
            digitalWrite(ADC_CLK,1);    delayMicroseconds(2);
            digitalWrite(ADC_CLK,0);    delayMicroseconds(2);

            pinMode(ADC_DIO, INPUT);
            dat1=dat1<<1 | digitalRead(ADC_DIO);
        }

        for(i=0;i<8;i++)
        {
            dat2 = dat2 | ((uchar)(digitalRead(ADC_DIO))<<i);
            digitalWrite(ADC_CLK,1);    delayMicroseconds(2);
            digitalWrite(ADC_CLK,0);    delayMicroseconds(2);
        }

        digitalWrite(ADC_CS,1);
        pinMode(ADC_DIO, OUTPUT);
        return(dat1==dat2) ? dat1 : 0;
    }

ADC0834ã®ã‚¢ãƒŠãƒ­ã‚°ã‹ã‚‰ãƒ‡ã‚¸ã‚¿ãƒ«ã¸ã®å¤‰æ›ã‚’å–å¾—ã™ã‚‹æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚
å…·ä½“çš„ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

.. code-block:: c

    digitalWrite(ADC_CS, 0);

CSã‚’ä½ãƒ¬ãƒ™ãƒ«ã«è¨­å®šã—ã€ADå¤‰æ›ã‚’æœ‰åŠ¹ã«ã—ã¾ã™ã€‚

.. code-block:: c

    // Start bit
    digitalWrite(ADC_CLK,0);
    digitalWrite(ADC_DIO,1);    delayMicroseconds(2);
    digitalWrite(ADC_CLK,1);    delayMicroseconds(2);

ã‚¯ãƒ­ãƒƒã‚¯å…¥åŠ›ã®ä½ã‹ã‚‰é«˜ã¸ã®é·ç§»ãŒåˆã‚ã¦ç™ºç”Ÿã™ã‚‹ã¨ãã€DIOã‚’1ã«è¨­å®šã—ã¦ã‚¹ã‚¿ãƒ¼ãƒˆãƒ“ãƒƒãƒˆã¨ã—ã¾ã™ã€‚æ¬¡ã®3ã¤ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ã€3ã¤ã®ä»£å…¥èªãŒã‚ã‚Šã¾ã™ã€‚

.. code-block:: c

    //Single End mode
    digitalWrite(ADC_CLK,0);
    digitalWrite(ADC_DIO,1);    delayMicroseconds(2);
    digitalWrite(ADC_CLK,1);    delayMicroseconds(2);

ã‚¯ãƒ­ãƒƒã‚¯å…¥åŠ›ã®ä½ã‹ã‚‰é«˜ã¸ã®é·ç§»ãŒ2å›ç›®ã«ç™ºç”Ÿã™ã‚‹ã¨ã™ãã«ã€DIOã‚’1ã«è¨­å®šã—ã€SGLãƒ¢ãƒ¼ãƒ‰ã‚’é¸æŠã—ã¾ã™ã€‚

.. code-block:: c

    // ODD
    digitalWrite(ADC_CLK,0);
    digitalWrite(ADC_DIO,odd);  delayMicroseconds(2);
    digitalWrite(ADC_CLK,1);    delayMicroseconds(2);

3å›ç›®ã«ç™ºç”Ÿã™ã‚‹ã¨ã€DIOã®å€¤ã¯å¤‰æ•° **odd** ã«ã‚ˆã£ã¦åˆ¶å¾¡ã•ã‚Œã¾ã™ã€‚

.. code-block:: c

    //Select
    digitalWrite(ADC_CLK,0);
    digitalWrite(ADC_DIO,sel);    delayMicroseconds(2);
    digitalWrite(ADC_CLK,1);

CLKã®ãƒ‘ãƒ«ã‚¹ãŒ4å›ç›®ã«ä½ãƒ¬ãƒ™ãƒ«ã‹ã‚‰é«˜ãƒ¬ãƒ™ãƒ«ã«å¤‰æ›ã•ã‚Œã‚‹ã¨ã€DIOã®å€¤ã¯å¤‰æ•° **sel** ã«ã‚ˆã£ã¦åˆ¶å¾¡ã•ã‚Œã¾ã™ã€‚

channel=0, sel=0, odd=0ã®æ¡ä»¶ã®ä¸‹ã§ã€ **sel** ã¨ **odd** ã«é–¢ã™ã‚‹æ“ä½œå¼ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

.. code-block:: c

    int sel = channel > 1 & 1;
    int odd = channel & 1;

channel=1, sel=0, odd=1ã®æ¡ä»¶ãŒæº€ãŸã•ã‚ŒãŸå ´åˆã€ä»¥ä¸‹ã®ã‚¢ãƒ‰ãƒ¬ã‚¹åˆ¶å¾¡ãƒ­ã‚¸ãƒƒã‚¯ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚ã“ã“ã§ã¯CH1ãŒé¸æŠã•ã‚Œã€ã‚¹ã‚¿ãƒ¼ãƒˆãƒ“ãƒƒãƒˆãŒå¤šé‡å™¨ãƒ¬ã‚¸ã‚¹ã‚¿ã®ã‚¹ã‚¿ãƒ¼ãƒˆä½ç½®ã«ã‚·ãƒ•ãƒˆã•ã‚Œã€å¤‰æ›ãŒé–‹å§‹ã•ã‚Œã¾ã™ã€‚

.. image:: ../img/image313.png


.. code-block:: c

    digitalWrite(ADC_DIO,1);    delayMicroseconds(2);
    digitalWrite(ADC_CLK,0);
    digitalWrite(ADC_DIO,1);    delayMicroseconds(2);

ã“ã“ã§ã€DIOã‚’2å›1ã«è¨­å®šã—ã¾ã™ãŒã€ç„¡è¦–ã—ã¦ãã ã•ã„ã€‚

.. code-block:: c

    for(i=0;i<8;i++)
        {
            digitalWrite(ADC_CLK,1);    delayMicroseconds(2);
            digitalWrite(ADC_CLK,0);    delayMicroseconds(2);

            pinMode(ADC_DIO, INPUT);
            dat1=dat1<<1 | digitalRead(ADC_DIO);
        }

æœ€åˆã®for()æ–‡ã§ã¯ã€CLKã®5å›ç›®ã®ãƒ‘ãƒ«ã‚¹ãŒé«˜ãƒ¬ãƒ™ãƒ«ã‹ã‚‰ä½ãƒ¬ãƒ™ãƒ«ã«å¤‰æ›ã•ã‚Œã‚‹ã¨ã™ãã«ã€DIOã‚’å…¥åŠ›ãƒ¢ãƒ¼ãƒ‰ã«è¨­å®šã—ã¾ã™ã€‚ãã—ã¦å¤‰æ›ãŒé–‹å§‹ã•ã‚Œã€å¤‰æ›ã•ã‚ŒãŸå€¤ã¯å¤‰æ•°dat1ã«æ ¼ç´ã•ã‚Œã¾ã™ã€‚8ã¤ã®ã‚¯ãƒ­ãƒƒã‚¯å‘¨æœŸã®å¾Œã€å¤‰æ›ã¯å®Œäº†ã—ã¾ã™ã€‚

.. code-block:: c

    for(i=0;i<8;i++)
        {
            dat2 = dat2 | ((uchar)(digitalRead(ADC_DIO))<<i);
            digitalWrite(ADC_CLK,1);    delayMicroseconds(2);
            digitalWrite(ADC_CLK,0);    delayMicroseconds(2);
        }

2ã¤ç›®ã®for()æ–‡ã§ã¯ã€ä»–ã®8ã¤ã®ã‚¯ãƒ­ãƒƒã‚¯å‘¨æœŸã®å¾Œã€å¤‰æ›ã•ã‚ŒãŸå€¤ã‚’DOçµŒç”±ã§å‡ºåŠ›ã—ã€å¤‰æ•°dat2ã«æ ¼ç´ã—ã¾ã™ã€‚

.. code-block:: c

    digitalWrite(ADC_CS,1);
    pinMode(ADC_DIO, OUTPUT);
    return(dat1==dat2) ? dat1 : 0;

return(dat1==dat2) ? dat1 : 0ã¯ã€å¤‰æ›ä¸­ã«å–å¾—ã•ã‚ŒãŸå€¤ã¨å‡ºåŠ›å€¤ã‚’æ¯”è¼ƒã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ä¸¡æ–¹ãŒç­‰ã—ã„å ´åˆã¯ã€å¤‰æ›å€¤dat1ã‚’å‡ºåŠ›ã—ã€ãã†ã§ãªã„å ´åˆã¯0ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚ã“ã“ã§ã€ADC0834ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯å®Œäº†ã—ã¾ã™ã€‚

.. code-block:: c

    softPwmCreate(LedPin,  0, 100);

ã“ã®é–¢æ•°ã¯ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’ä½¿ç”¨ã—ã¦PWMãƒ”ãƒ³ã€LedPinã‚’ä½œæˆã™ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã™ã€‚ãã®å¾Œã€åˆæœŸã®ãƒ‘ãƒ«ã‚¹å¹…ã¯0ã«è¨­å®šã•ã‚Œã€PWMã®å‘¨æœŸã¯100 x 100usã¨ãªã‚Šã¾ã™ã€‚

.. code-block:: c

    while(1){
            analogVal = get_ADC_Result(0);
            printf("Current analogVal : %d\n", analogVal);
            softPwmWrite(LedPin, analogVal);
            delay(100);
        }

ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã¯ã€ãƒãƒ†ãƒ³ã‚·ãƒ§ãƒ¡ãƒ¼ã‚¿ãƒ¼ã«æ¥ç¶šã•ã‚ŒãŸãƒãƒ£ãƒ³ãƒãƒ«0ã®å€¤ã‚’èª­ã¿å–ã‚Šã¾ã™ã€‚ãã—ã¦ã€ãã®å€¤ã‚’å¤‰æ•°analogValã«æ ¼ç´ã—ã€LedPinã«æ›¸ãè¾¼ã¿ã¾ã™ã€‚ã“ã‚Œã§ã€ãƒãƒ†ãƒ³ã‚·ãƒ§ãƒ¡ãƒ¼ã‚¿ãƒ¼ã®å€¤ã«å¿œã˜ã¦LEDã®æ˜ã‚‹ã•ãŒå¤‰ã‚ã‚‹ã®ãŒã‚ã‹ã‚Šã¾ã™ã€‚

ç¾è±¡ã®ç”»åƒ
------------------

.. image:: ../img/image181.jpeg


